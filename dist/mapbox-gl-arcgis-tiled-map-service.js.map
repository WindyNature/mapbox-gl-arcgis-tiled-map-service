{"version":3,"file":"mapbox-gl-arcgis-tiled-map-service.js","sources":["../node_modules/mapbox-gl/src/util/util.js","../node_modules/mapbox-gl/src/util/config.js","../node_modules/mapbox-gl/src/util/webp_supported.js","../node_modules/mapbox-gl/src/util/browser.js","../node_modules/mapbox-gl/src/util/mapbox.js","../node_modules/mapbox-gl/src/util/ajax.js","../node_modules/mapbox-gl/src/util/evented.js","../node_modules/@mapbox/sphericalmercator/sphericalmercator.js","../src/load_arcgis_mapserver.js","../node_modules/mapbox-gl/src/geo/lng_lat.js","../node_modules/mapbox-gl/src/geo/lng_lat_bounds.js","../node_modules/mapbox-gl/src/geo/mercator_coordinate.js","../node_modules/mapbox-gl/src/source/tile_bounds.js","../src/helpers.js","../node_modules/mapbox-gl/src/render/texture.js","../src/arcgis_tiled_map_service_source.js"],"sourcesContent":["// @flow\n\nimport UnitBezier from '@mapbox/unitbezier';\n\nimport Point from '@mapbox/point-geometry';\nimport window from './window';\n\nimport type {Callback} from '../types/callback';\n\n/**\n * @module util\n * @private\n */\n\n/**\n * Given a value `t` that varies between 0 and 1, return\n * an interpolation function that eases between 0 and 1 in a pleasing\n * cubic in-out fashion.\n *\n * @private\n */\nexport function easeCubicInOut(t: number): number {\n    if (t <= 0) return 0;\n    if (t >= 1) return 1;\n    const t2 = t * t,\n        t3 = t2 * t;\n    return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n}\n\n/**\n * Given given (x, y), (x1, y1) control points for a bezier curve,\n * return a function that interpolates along that curve.\n *\n * @param p1x control point 1 x coordinate\n * @param p1y control point 1 y coordinate\n * @param p2x control point 2 x coordinate\n * @param p2y control point 2 y coordinate\n * @private\n */\nexport function bezier(p1x: number, p1y: number, p2x: number, p2y: number): (t: number) => number {\n    const bezier = new UnitBezier(p1x, p1y, p2x, p2y);\n    return function(t: number) {\n        return bezier.solve(t);\n    };\n}\n\n/**\n * A default bezier-curve powered easing function with\n * control points (0.25, 0.1) and (0.25, 1)\n *\n * @private\n */\nexport const ease = bezier(0.25, 0.1, 0.25, 1);\n\n/**\n * constrain n to the given range via min + max\n *\n * @param n value\n * @param min the minimum value to be returned\n * @param max the maximum value to be returned\n * @returns the clamped value\n * @private\n */\nexport function clamp(n: number, min: number, max: number): number {\n    return Math.min(max, Math.max(min, n));\n}\n\n/**\n * constrain n to the given range, excluding the minimum, via modular arithmetic\n *\n * @param n value\n * @param min the minimum value to be returned, exclusive\n * @param max the maximum value to be returned, inclusive\n * @returns constrained number\n * @private\n */\nexport function wrap(n: number, min: number, max: number): number {\n    const d = max - min;\n    const w = ((n - min) % d + d) % d + min;\n    return (w === min) ? max : w;\n}\n\n/*\n * Call an asynchronous function on an array of arguments,\n * calling `callback` with the completed results of all calls.\n *\n * @param array input to each call of the async function.\n * @param fn an async function with signature (data, callback)\n * @param callback a callback run after all async work is done.\n * called with an array, containing the results of each async call.\n * @private\n */\nexport function asyncAll<Item, Result>(\n    array: Array<Item>,\n    fn: (item: Item, fnCallback: Callback<Result>) => void,\n    callback: Callback<Array<Result>>\n) {\n    if (!array.length) { return callback(null, []); }\n    let remaining = array.length;\n    const results = new Array(array.length);\n    let error = null;\n    array.forEach((item, i) => {\n        fn(item, (err, result) => {\n            if (err) error = err;\n            results[i] = ((result: any): Result); // https://github.com/facebook/flow/issues/2123\n            if (--remaining === 0) callback(error, results);\n        });\n    });\n}\n\n/*\n * Polyfill for Object.values. Not fully spec compliant, but we don't\n * need it to be.\n *\n * @private\n */\nexport function values<T>(obj: {[key: string]: T}): Array<T> {\n    const result = [];\n    for (const k in obj) {\n        result.push(obj[k]);\n    }\n    return result;\n}\n\n/*\n * Compute the difference between the keys in one object and the keys\n * in another object.\n *\n * @returns keys difference\n * @private\n */\nexport function keysDifference<S, T>(obj: {[key: string]: S}, other: {[key: string]: T}): Array<string> {\n    const difference = [];\n    for (const i in obj) {\n        if (!(i in other)) {\n            difference.push(i);\n        }\n    }\n    return difference;\n}\n\n/**\n * Given a destination object and optionally many source objects,\n * copy all properties from the source objects into the destination.\n * The last source object given overrides properties from previous\n * source objects.\n *\n * @param dest destination object\n * @param sources sources from which properties are pulled\n * @private\n */\nexport function extend(dest: Object, ...sources: Array<?Object>): Object {\n    for (const src of sources) {\n        for (const k in src) {\n            dest[k] = src[k];\n        }\n    }\n    return dest;\n}\n\n/**\n * Given an object and a number of properties as strings, return version\n * of that object with only those properties.\n *\n * @param src the object\n * @param properties an array of property names chosen\n * to appear on the resulting object.\n * @returns object with limited properties.\n * @example\n * var foo = { name: 'Charlie', age: 10 };\n * var justName = pick(foo, ['name']);\n * // justName = { name: 'Charlie' }\n * @private\n */\nexport function pick(src: Object, properties: Array<string>): Object {\n    const result = {};\n    for (let i = 0; i < properties.length; i++) {\n        const k = properties[i];\n        if (k in src) {\n            result[k] = src[k];\n        }\n    }\n    return result;\n}\n\nlet id = 1;\n\n/**\n * Return a unique numeric id, starting at 1 and incrementing with\n * each call.\n *\n * @returns unique numeric id.\n * @private\n */\nexport function uniqueId(): number {\n    return id++;\n}\n\n/**\n * Return a random UUID (v4). Taken from: https://gist.github.com/jed/982883\n * @private\n */\nexport function uuid(): string {\n    function b(a) {\n        return a ? (a ^ Math.random() * 16 >> a / 4).toString(16) :\n        //$FlowFixMe: Flow doesn't like the implied array literal conversion here\n            ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, b);\n    }\n    return b();\n}\n\n/**\n * Validate a string to match UUID(v4) of the\n * form: xxxxxxxx-xxxx-4xxx-[89ab]xxx-xxxxxxxxxxxx\n * @param str string to validate.\n * @private\n */\nexport function validateUuid(str: ?string): boolean {\n    return str ? /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(str) : false;\n}\n\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n *\n * @param fns list of member function names\n * @param context the context value\n * @example\n * function MyClass() {\n *   bindAll(['ontimer'], this);\n *   this.name = 'Tom';\n * }\n * MyClass.prototype.ontimer = function() {\n *   alert(this.name);\n * };\n * var myClass = new MyClass();\n * setTimeout(myClass.ontimer, 100);\n * @private\n */\nexport function bindAll(fns: Array<string>, context: Object): void {\n    fns.forEach((fn) => {\n        if (!context[fn]) { return; }\n        context[fn] = context[fn].bind(context);\n    });\n}\n\n/**\n * Determine if a string ends with a particular substring\n *\n * @private\n */\nexport function endsWith(string: string, suffix: string): boolean {\n    return string.indexOf(suffix, string.length - suffix.length) !== -1;\n}\n\n/**\n * Create an object by mapping all the values of an existing object while\n * preserving their keys.\n *\n * @private\n */\nexport function mapObject(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        output[key] = iterator.call(context || this, input[key], key, input);\n    }\n    return output;\n}\n\n/**\n * Create an object by filtering out values of an existing object.\n *\n * @private\n */\nexport function filterObject(input: Object, iterator: Function, context?: Object): Object {\n    const output = {};\n    for (const key in input) {\n        if (iterator.call(context || this, input[key], key, input)) {\n            output[key] = input[key];\n        }\n    }\n    return output;\n}\n\nimport deepEqual from '../style-spec/util/deep_equal';\nexport { deepEqual };\n\n/**\n * Deeply clones two objects.\n *\n * @private\n */\nexport function clone<T>(input: T): T {\n    if (Array.isArray(input)) {\n        return input.map(clone);\n    } else if (typeof input === 'object' && input) {\n        return ((mapObject(input, clone): any): T);\n    } else {\n        return input;\n    }\n}\n\n/**\n * Check if two arrays have at least one common element.\n *\n * @private\n */\nexport function arraysIntersect<T>(a: Array<T>, b: Array<T>): boolean {\n    for (let l = 0; l < a.length; l++) {\n        if (b.indexOf(a[l]) >= 0) return true;\n    }\n    return false;\n}\n\n/**\n * Print a warning message to the console and ensure duplicate warning messages\n * are not printed.\n *\n * @private\n */\nconst warnOnceHistory: {[key: string]: boolean} = {};\n\nexport function warnOnce(message: string): void {\n    if (!warnOnceHistory[message]) {\n        // console isn't defined in some WebWorkers, see #2558\n        if (typeof console !== \"undefined\") console.warn(message);\n        warnOnceHistory[message] = true;\n    }\n}\n\n/**\n * Indicates if the provided Points are in a counter clockwise (true) or clockwise (false) order\n *\n * @private\n * @returns true for a counter clockwise set of points\n */\n// http://bryceboe.com/2006/10/23/line-segment-intersection-algorithm/\nexport function isCounterClockwise(a: Point, b: Point, c: Point): boolean {\n    return (c.y - a.y) * (b.x - a.x) > (b.y - a.y) * (c.x - a.x);\n}\n\n/**\n * Returns the signed area for the polygon ring.  Postive areas are exterior rings and\n * have a clockwise winding.  Negative areas are interior rings and have a counter clockwise\n * ordering.\n *\n * @private\n * @param ring Exterior or interior ring\n */\nexport function calculateSignedArea(ring: Array<Point>): number {\n    let sum = 0;\n    for (let i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n\n/**\n * Detects closed polygons, first + last point are equal\n *\n * @private\n * @param points array of points\n * @return true if the points are a closed polygon\n */\nexport function isClosedPolygon(points: Array<Point>): boolean {\n    // If it is 2 points that are the same then it is a point\n    // If it is 3 points with start and end the same then it is a line\n    if (points.length < 4)\n        return false;\n\n    const p1 = points[0];\n    const p2 = points[points.length - 1];\n\n    if (Math.abs(p1.x - p2.x) > 0 ||\n        Math.abs(p1.y - p2.y) > 0) {\n        return false;\n    }\n\n    // polygon simplification can produce polygons with zero area and more than 3 points\n    return Math.abs(calculateSignedArea(points)) > 0.01;\n}\n\n/**\n * Converts spherical coordinates to cartesian coordinates.\n *\n * @private\n * @param spherical Spherical coordinates, in [radial, azimuthal, polar]\n * @return cartesian coordinates in [x, y, z]\n */\n\nexport function sphericalToCartesian([r, azimuthal, polar]: [number, number, number]): {x: number, y: number, z: number} {\n    // We abstract \"north\"/\"up\" (compass-wise) to be 0° when really this is 90° (π/2):\n    // correct for that here\n    azimuthal += 90;\n\n    // Convert azimuthal and polar angles to radians\n    azimuthal *= Math.PI / 180;\n    polar *= Math.PI / 180;\n\n    return {\n        x: r * Math.cos(azimuthal) * Math.sin(polar),\n        y: r * Math.sin(azimuthal) * Math.sin(polar),\n        z: r * Math.cos(polar)\n    };\n}\n\n/**\n * Parses data from 'Cache-Control' headers.\n *\n * @private\n * @param cacheControl Value of 'Cache-Control' header\n * @return object containing parsed header info.\n */\n\nexport function parseCacheControl(cacheControl: string): Object {\n    // Taken from [Wreck](https://github.com/hapijs/wreck)\n    const re = /(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g;\n\n    const header = {};\n    cacheControl.replace(re, ($0, $1, $2, $3) => {\n        const value = $2 || $3;\n        header[$1] = value ? value.toLowerCase() : true;\n        return '';\n    });\n\n    if (header['max-age']) {\n        const maxAge = parseInt(header['max-age'], 10);\n        if (isNaN(maxAge)) delete header['max-age'];\n        else header['max-age'] = maxAge;\n    }\n\n    return header;\n}\n\nexport function storageAvailable(type: string): boolean {\n    try {\n        const storage = window[type];\n        storage.setItem('_mapbox_test_', 1);\n        storage.removeItem('_mapbox_test_');\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n","// @flow\n\ntype Config = {|\n  API_URL: string,\n  EVENTS_URL: string,\n  REQUIRE_ACCESS_TOKEN: boolean,\n  ACCESS_TOKEN: ?string,\n  MAX_PARALLEL_IMAGE_REQUESTS: number\n|};\n\nconst config: Config = {\n    API_URL: 'https://api.mapbox.com',\n    get EVENTS_URL() {\n        if (this.API_URL.indexOf('https://api.mapbox.cn') === 0) {\n            return 'https://events.mapbox.cn/events/v2';\n        } else {\n            return 'https://events.mapbox.com/events/v2';\n        }\n    },\n    REQUIRE_ACCESS_TOKEN: true,\n    ACCESS_TOKEN: null,\n    MAX_PARALLEL_IMAGE_REQUESTS: 16\n};\n\nexport default config;\n","// @flow\n\nimport window from './window';\n\nconst exported = {\n    supported: false,\n    testSupport\n};\n\nexport default exported;\n\nlet glForTesting;\nlet webpCheckComplete = false;\nlet webpImgTest;\n\nif (window.document) {\n    webpImgTest = window.document.createElement('img');\n    webpImgTest.onload = function() {\n        if (glForTesting) testWebpTextureUpload(glForTesting);\n        glForTesting = null;\n    };\n    webpImgTest.onerror = function() {\n        webpCheckComplete = true;\n        glForTesting = null;\n    };\n    webpImgTest.src = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n}\n\nfunction testSupport(gl: WebGLRenderingContext) {\n    if (webpCheckComplete || !webpImgTest) return;\n\n    if (!webpImgTest.complete) {\n        glForTesting = gl;\n        return;\n    }\n\n    testWebpTextureUpload(gl);\n}\n\nfunction testWebpTextureUpload(gl: WebGLRenderingContext) {\n    // Edge 18 supports WebP but not uploading a WebP image to a gl texture\n    // Test support for this before allowing WebP images.\n    // https://github.com/mapbox/mapbox-gl-js/issues/7671\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n\n    try {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, webpImgTest);\n\n        // The error does not get triggered in Edge if the context is lost\n        if (gl.isContextLost()) return;\n\n        exported.supported = true;\n    } catch (e) {\n        // Catch \"Unspecified Error.\" in Edge 18.\n    }\n\n    gl.deleteTexture(texture);\n\n    webpCheckComplete = true;\n}\n","// @flow\n\nimport window from './window';\nimport type { Cancelable } from '../types/cancelable';\n\nconst now = window.performance && window.performance.now ?\n    window.performance.now.bind(window.performance) :\n    Date.now.bind(Date);\n\nconst raf = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame;\n\nconst cancel = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame;\n\n/**\n * @private\n */\nconst exported = {\n    /**\n     * Provides a function that outputs milliseconds: either performance.now()\n     * or a fallback to Date.now()\n     */\n    now,\n\n    frame(fn: Function): Cancelable {\n        const frame = raf(fn);\n        return { cancel: () => cancel(frame) };\n    },\n\n    getImageData(img: CanvasImageSource): ImageData {\n        const canvas = window.document.createElement('canvas');\n        const context = canvas.getContext('2d');\n        if (!context) {\n            throw new Error('failed to create canvas 2d context');\n        }\n        canvas.width = img.width;\n        canvas.height = img.height;\n        context.drawImage(img, 0, 0, img.width, img.height);\n        return context.getImageData(0, 0, img.width, img.height);\n    },\n\n    resolveURL(path: string) {\n        const a = window.document.createElement('a');\n        a.href = path;\n        return a.href;\n    },\n\n    hardwareConcurrency: window.navigator.hardwareConcurrency || 4,\n    get devicePixelRatio() { return window.devicePixelRatio; }\n};\n\nexport default exported;\n","// @flow\n\nimport config from './config';\n\nimport browser from './browser';\nimport webpSupported from './webp_supported';\nimport window from './window';\nimport { version } from '../../package.json';\nimport { uuid, validateUuid, storageAvailable, warnOnce, extend } from './util';\nimport { postData } from './ajax';\n\nimport type { RequestParameters } from './ajax';\nimport type { Cancelable } from '../types/cancelable';\nimport type {TileJSON} from '../types/tilejson';\n\nconst help = 'See https://www.mapbox.com/api-documentation/#access-tokens';\nconst telemEventKey = 'mapbox.eventData';\n\ntype UrlObject = {|\n    protocol: string,\n    authority: string,\n    path: string,\n    params: Array<string>\n|};\n\nfunction makeAPIURL(urlObject: UrlObject, accessToken: string | null | void): string {\n    const apiUrlObject = parseUrl(config.API_URL);\n    urlObject.protocol = apiUrlObject.protocol;\n    urlObject.authority = apiUrlObject.authority;\n\n    if (apiUrlObject.path !== '/') {\n        urlObject.path = `${apiUrlObject.path}${urlObject.path}`;\n    }\n\n    if (!config.REQUIRE_ACCESS_TOKEN) return formatUrl(urlObject);\n\n    accessToken = accessToken || config.ACCESS_TOKEN;\n    if (!accessToken)\n        throw new Error(`An API access token is required to use Mapbox GL. ${help}`);\n    if (accessToken[0] === 's')\n        throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${help}`);\n\n    urlObject.params.push(`access_token=${accessToken}`);\n    return formatUrl(urlObject);\n}\n\nfunction isMapboxURL(url: string) {\n    return url.indexOf('mapbox:') === 0;\n}\n\nconst mapboxHTTPURLRe = /^((https?:)?\\/\\/)?([^\\/]+\\.)?mapbox\\.c(n|om)(\\/|\\?|$)/i;\nfunction isMapboxHTTPURL(url: string): boolean {\n    return mapboxHTTPURLRe.test(url);\n}\n\nexport { isMapboxURL, isMapboxHTTPURL };\n\nexport const normalizeStyleURL = function(url: string, accessToken?: string): string {\n    if (!isMapboxURL(url)) return url;\n    const urlObject = parseUrl(url);\n    urlObject.path = `/styles/v1${urlObject.path}`;\n    return makeAPIURL(urlObject, accessToken);\n};\n\nexport const normalizeGlyphsURL = function(url: string, accessToken?: string): string {\n    if (!isMapboxURL(url)) return url;\n    const urlObject = parseUrl(url);\n    urlObject.path = `/fonts/v1${urlObject.path}`;\n    return makeAPIURL(urlObject, accessToken);\n};\n\nexport const normalizeSourceURL = function(url: string, accessToken?: string): string {\n    if (!isMapboxURL(url)) return url;\n    const urlObject = parseUrl(url);\n    urlObject.path = `/v4/${urlObject.authority}.json`;\n    // TileJSON requests need a secure flag appended to their URLs so\n    // that the server knows to send SSL-ified resource references.\n    urlObject.params.push('secure');\n    return makeAPIURL(urlObject, accessToken);\n};\n\nexport const normalizeSpriteURL = function(url: string, format: string, extension: string, accessToken?: string): string {\n    const urlObject = parseUrl(url);\n    if (!isMapboxURL(url)) {\n        urlObject.path += `${format}${extension}`;\n        return formatUrl(urlObject);\n    }\n    urlObject.path = `/styles/v1${urlObject.path}/sprite${format}${extension}`;\n    return makeAPIURL(urlObject, accessToken);\n};\n\nconst imageExtensionRe = /(\\.(png|jpg)\\d*)(?=$)/;\n// matches any file extension specified by a dot and one or more alphanumeric characters\nconst extensionRe = /\\.[\\w]+$/;\n\nexport const normalizeTileURL = function(tileURL: string, sourceURL?: ?string, tileSize?: ?number): string {\n    if (!sourceURL || !isMapboxURL(sourceURL)) return tileURL;\n\n    const urlObject = parseUrl(tileURL);\n\n    // The v4 mapbox tile API supports 512x512 image tiles only when @2x\n    // is appended to the tile URL. If `tileSize: 512` is specified for\n    // a Mapbox raster source force the @2x suffix even if a non hidpi device.\n    const suffix = browser.devicePixelRatio >= 2 || tileSize === 512 ? '@2x' : '';\n    const extension = webpSupported.supported ? '.webp' : '$1';\n    urlObject.path = urlObject.path.replace(imageExtensionRe, `${suffix}${extension}`);\n    urlObject.path = `/v4${urlObject.path}`;\n\n    return makeAPIURL(urlObject);\n};\n\nexport const canonicalizeTileURL = function(url: string) {\n    const version = \"/v4/\";\n\n    const urlObject = parseUrl(url);\n    // Make sure that we are dealing with a valid Mapbox tile URL.\n    // Has to begin with /v4/, with a valid filename + extension\n    if (!urlObject.path.match(/(^\\/v4\\/)/) || !urlObject.path.match(extensionRe)) {\n        // Not a proper Mapbox tile URL.\n        return url;\n    }\n    // Reassemble the canonical URL from the parts we've parsed before.\n    let result = \"mapbox://tiles/\";\n    result +=  urlObject.path.replace(version, '');\n\n    // Append the query string, minus the access token parameter.\n    const params = urlObject.params.filter(p => !p.match(/^access_token=/));\n    if (params.length) result += `?${params.join('&')}`;\n    return result;\n};\n\nexport const canonicalizeTileset = function(tileJSON: TileJSON, sourceURL: string) {\n    if (!isMapboxURL(sourceURL)) return tileJSON.tiles || [];\n    const canonical = [];\n    for (const url of tileJSON.tiles) {\n        const canonicalUrl = canonicalizeTileURL(url);\n        canonical.push(canonicalUrl);\n    }\n    return canonical;\n};\n\nconst urlRe = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n\nfunction parseUrl(url: string): UrlObject {\n    const parts = url.match(urlRe);\n    if (!parts) {\n        throw new Error('Unable to parse URL object');\n    }\n    return {\n        protocol: parts[1],\n        authority: parts[2],\n        path: parts[3] || '/',\n        params: parts[4] ? parts[4].split('&') : []\n    };\n}\n\nfunction formatUrl(obj: UrlObject): string {\n    const params = obj.params.length ? `?${obj.params.join('&')}` : '';\n    return `${obj.protocol}://${obj.authority}${obj.path}${params}`;\n}\n\ntype TelemetryEventType = 'appUserTurnstile' | 'map.load';\n\nclass TelemetryEvent {\n    eventData: { lastSuccess: ?number, accessToken: ?string};\n    anonId: ?string;\n    queue: Array<any>;\n    type: TelemetryEventType;\n    pendingRequest: ?Cancelable;\n\n    constructor(type: TelemetryEventType) {\n        this.type = type;\n        this.anonId = null;\n        this.eventData = {lastSuccess: null, accessToken: config.ACCESS_TOKEN};\n        this.queue = [];\n        this.pendingRequest = null;\n    }\n\n    fetchEventData() {\n        const isLocalStorageAvailable = storageAvailable('localStorage');\n        const storageKey = `${telemEventKey}:${config.ACCESS_TOKEN || ''}`;\n        const uuidKey = `${telemEventKey}.uuid:${config.ACCESS_TOKEN || ''}`;\n\n        if (isLocalStorageAvailable) {\n            //Retrieve cached data\n            try {\n                const data = window.localStorage.getItem(storageKey);\n                if (data) {\n                    this.eventData = JSON.parse(data);\n                }\n\n                const uuid = window.localStorage.getItem(uuidKey);\n                if (uuid) this.anonId = uuid;\n            } catch (e) {\n                warnOnce('Unable to read from LocalStorage');\n            }\n        }\n    }\n\n    saveEventData() {\n        const isLocalStorageAvailable = storageAvailable('localStorage');\n        const storageKey = `${telemEventKey}:${config.ACCESS_TOKEN || ''}`;\n        const uuidKey = `${telemEventKey}.uuid:${config.ACCESS_TOKEN || ''}`;\n        if (isLocalStorageAvailable) {\n            try {\n                window.localStorage.setItem(uuidKey, this.anonId);\n                if (this.eventData.lastSuccess) {\n                    window.localStorage.setItem(storageKey, JSON.stringify(this.eventData));\n                }\n            } catch (e) {\n                warnOnce('Unable to write to LocalStorage');\n            }\n        }\n\n    }\n\n    processRequests() {}\n\n    /*\n    * If any event data should be persisted after the POST request, the callback should modify eventData`\n    * to the values that should be saved. For this reason, the callback should be invoked prior to the call\n    * to TelemetryEvent#saveData\n    */\n    postEvent(timestamp: number, additionalPayload: {[string]: any}, callback: (err: ?Error) => void) {\n        const eventsUrlObject: UrlObject = parseUrl(config.EVENTS_URL);\n        eventsUrlObject.params.push(`access_token=${config.ACCESS_TOKEN || ''}`);\n        const payload: Object = {\n            event: this.type,\n            created: new Date(timestamp).toISOString(),\n            sdkIdentifier: 'mapbox-gl-js',\n            sdkVersion: version,\n            userId: this.anonId\n        };\n\n        const finalPayload = additionalPayload ? extend(payload, additionalPayload) : payload;\n        const request: RequestParameters = {\n            url: formatUrl(eventsUrlObject),\n            headers: {\n                'Content-Type': 'text/plain' //Skip the pre-flight OPTIONS request\n            },\n            body: JSON.stringify([finalPayload])\n        };\n\n        this.pendingRequest = postData(request, (error) => {\n            this.pendingRequest = null;\n            callback(error);\n            this.saveEventData();\n            this.processRequests();\n        });\n    }\n\n    queueRequest(event: number | {id: number, timestamp: number}) {\n        this.queue.push(event);\n        this.processRequests();\n    }\n}\n\nexport class MapLoadEvent extends TelemetryEvent {\n    +success: {[number]: boolean};\n\n    constructor() {\n        super('map.load');\n        this.success = {};\n    }\n\n    postMapLoadEvent(tileUrls: Array<string>, mapId: number) {\n        //Enabled only when Mapbox Access Token is set and a source uses\n        // mapbox tiles.\n        if (config.ACCESS_TOKEN &&\n            Array.isArray(tileUrls) &&\n            tileUrls.some(url => isMapboxHTTPURL(url))) {\n            this.queueRequest({id: mapId, timestamp: Date.now()});\n        }\n    }\n\n    processRequests() {\n        if (this.pendingRequest || this.queue.length === 0) return;\n        const {id, timestamp} = this.queue.shift();\n\n        // Only one load event should fire per map\n        if (id && this.success[id]) return;\n\n        if (!this.anonId) {\n            this.fetchEventData();\n        }\n\n        if (!validateUuid(this.anonId)) {\n            this.anonId = uuid();\n        }\n\n        this.postEvent(timestamp, {}, (err) => {\n            if (!err) {\n                if (id) this.success[id] = true;\n            }\n        });\n    }\n}\n\n\nexport class TurnstileEvent extends TelemetryEvent {\n    constructor() {\n        super('appUserTurnstile');\n    }\n\n    postTurnstileEvent(tileUrls: Array<string>) {\n        //Enabled only when Mapbox Access Token is set and a source uses\n        // mapbox tiles.\n        if (config.ACCESS_TOKEN &&\n            Array.isArray(tileUrls) &&\n            tileUrls.some(url => isMapboxHTTPURL(url))) {\n            this.queueRequest(Date.now());\n        }\n    }\n\n\n    processRequests() {\n        if (this.pendingRequest || this.queue.length === 0) {\n            return;\n        }\n\n        let dueForEvent = this.eventData.accessToken ? (this.eventData.accessToken !== config.ACCESS_TOKEN) : false;\n        //Reset event data cache if the access token changed.\n        if (dueForEvent) {\n            this.anonId = this.eventData.lastSuccess = null;\n        }\n        if (!this.anonId || !this.eventData.lastSuccess) {\n            //Retrieve cached data\n            this.fetchEventData();\n        }\n\n        if (!validateUuid(this.anonId)) {\n            this.anonId = uuid();\n            dueForEvent = true;\n        }\n\n        const nextUpdate = this.queue.shift();\n        // Record turnstile event once per calendar day.\n        if (this.eventData.lastSuccess) {\n            const lastUpdate = new Date(this.eventData.lastSuccess);\n            const nextDate = new Date(nextUpdate);\n            const daysElapsed = (nextUpdate - this.eventData.lastSuccess) / (24 * 60 * 60 * 1000);\n            dueForEvent = dueForEvent || daysElapsed >= 1 || daysElapsed < -1 || lastUpdate.getDate() !== nextDate.getDate();\n        } else {\n            dueForEvent = true;\n        }\n\n        if (!dueForEvent) {\n            return this.processRequests();\n        }\n\n        this.postEvent(nextUpdate, {\"enabled.telemetry\": false}, (err) => {\n            if (!err) {\n                this.eventData.lastSuccess = nextUpdate;\n                this.eventData.accessToken = config.ACCESS_TOKEN;\n            }\n        });\n    }\n}\n\nconst turnstileEvent_ = new TurnstileEvent();\nexport const postTurnstileEvent = turnstileEvent_.postTurnstileEvent.bind(turnstileEvent_);\n\nconst mapLoadEvent_ = new MapLoadEvent();\nexport const postMapLoadEvent = mapLoadEvent_.postMapLoadEvent.bind(mapLoadEvent_);\n","// @flow\n\nimport window from './window';\nimport { extend } from './util';\nimport { isMapboxHTTPURL } from './mapbox';\nimport config from './config';\nimport assert from 'assert';\n\nimport type { Callback } from '../types/callback';\nimport type { Cancelable } from '../types/cancelable';\n\n/**\n * The type of a resource.\n * @private\n * @readonly\n * @enum {string}\n */\nconst ResourceType = {\n    Unknown: 'Unknown',\n    Style: 'Style',\n    Source: 'Source',\n    Tile: 'Tile',\n    Glyphs: 'Glyphs',\n    SpriteImage: 'SpriteImage',\n    SpriteJSON: 'SpriteJSON',\n    Image: 'Image'\n};\nexport { ResourceType };\n\nif (typeof Object.freeze == 'function') {\n    Object.freeze(ResourceType);\n}\n\n/**\n * A `RequestParameters` object to be returned from Map.options.transformRequest callbacks.\n * @typedef {Object} RequestParameters\n * @property {string} url The URL to be requested.\n * @property {Object} headers The headers to be sent with the request.\n * @property {string} credentials `'same-origin'|'include'` Use 'include' to send cookies with cross-origin requests.\n */\nexport type RequestParameters = {\n    url: string,\n    headers?: Object,\n    method?: 'GET' | 'POST' | 'PUT',\n    body?: string,\n    type?: 'string' | 'json' | 'arrayBuffer',\n    credentials?: 'same-origin' | 'include',\n    collectResourceTiming?: boolean\n};\n\nexport type ResponseCallback<T> = (error: ?Error, data: ?T, cacheControl: ?string, expires: ?string) => void;\n\nclass AJAXError extends Error {\n    status: number;\n    url: string;\n    constructor(message: string, status: number, url: string) {\n        if (status === 401 && isMapboxHTTPURL(url)) {\n            message += ': you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens';\n        }\n        super(message);\n        this.status = status;\n        this.url = url;\n\n        // work around for https://github.com/Rich-Harris/buble/issues/40\n        this.name = this.constructor.name;\n        this.message = message;\n    }\n\n    toString() {\n        return `${this.name}: ${this.message} (${this.status}): ${this.url}`;\n    }\n}\n\n// Ensure that we're sending the correct referrer from blob URL worker bundles.\n// For files loaded from the local file system, `location.origin` will be set\n// to the string(!) \"null\" (Firefox), or \"file://\" (Chrome, Safari, Edge, IE),\n// and we will set an empty referrer. Otherwise, we're using the document's URL.\n/* global self, WorkerGlobalScope */\nexport const getReferrer = typeof WorkerGlobalScope !== 'undefined' &&\n                           typeof self !== 'undefined' &&\n                           self instanceof WorkerGlobalScope ?\n    () => self.worker && self.worker.referrer :\n    () => {\n        const origin = window.location.origin;\n        if (origin && origin !== 'null' && origin !== 'file://') {\n            return origin + window.location.pathname;\n        }\n    };\n\nfunction makeFetchRequest(requestParameters: RequestParameters, callback: ResponseCallback<any>): Cancelable {\n    const controller = new window.AbortController();\n    const request = new window.Request(requestParameters.url, {\n        method: requestParameters.method || 'GET',\n        body: requestParameters.body,\n        credentials: requestParameters.credentials,\n        headers: requestParameters.headers,\n        referrer: getReferrer(),\n        signal: controller.signal\n    });\n\n    if (requestParameters.type === 'json') {\n        request.headers.set('Accept', 'application/json');\n    }\n\n    window.fetch(request).then(response => {\n        if (response.ok) {\n            response[requestParameters.type || 'text']().then(result => {\n                callback(null, result, response.headers.get('Cache-Control'), response.headers.get('Expires'));\n            }).catch(err => callback(new Error(err.message)));\n        } else {\n            callback(new AJAXError(response.statusText, response.status, requestParameters.url));\n        }\n    }).catch((error) => {\n        if (error.code === 20) {\n            // silence expected AbortError\n            return;\n        }\n        callback(new Error(error.message));\n    });\n\n    return { cancel: () => controller.abort() };\n}\n\nfunction makeXMLHttpRequest(requestParameters: RequestParameters, callback: ResponseCallback<any>): Cancelable {\n    const xhr: XMLHttpRequest = new window.XMLHttpRequest();\n\n    xhr.open(requestParameters.method || 'GET', requestParameters.url, true);\n    if (requestParameters.type === 'arrayBuffer') {\n        xhr.responseType = 'arraybuffer';\n    }\n    for (const k in requestParameters.headers) {\n        xhr.setRequestHeader(k, requestParameters.headers[k]);\n    }\n    if (requestParameters.type === 'json') {\n        xhr.setRequestHeader('Accept', 'application/json');\n    }\n    xhr.withCredentials = requestParameters.credentials === 'include';\n    xhr.onerror = () => {\n        callback(new Error(xhr.statusText));\n    };\n    xhr.onload = () => {\n        if (((xhr.status >= 200 && xhr.status < 300) || xhr.status === 0) && xhr.response !== null) {\n            let data: mixed = xhr.response;\n            if (requestParameters.type === 'json') {\n                // We're manually parsing JSON here to get better error messages.\n                try {\n                    data = JSON.parse(xhr.response);\n                } catch (err) {\n                    return callback(err);\n                }\n            }\n            callback(null, data, xhr.getResponseHeader('Cache-Control'), xhr.getResponseHeader('Expires'));\n        } else {\n            callback(new AJAXError(xhr.statusText, xhr.status, requestParameters.url));\n        }\n    };\n    xhr.send(requestParameters.body);\n    return { cancel: () => xhr.abort() };\n}\n\nconst makeRequest = window.fetch && window.Request && window.AbortController ? makeFetchRequest : makeXMLHttpRequest;\n\nexport const getJSON = function(requestParameters: RequestParameters, callback: ResponseCallback<Object>): Cancelable {\n    return makeRequest(extend(requestParameters, { type: 'json' }), callback);\n};\n\nexport const getArrayBuffer = function(requestParameters: RequestParameters, callback: ResponseCallback<ArrayBuffer>): Cancelable {\n    return makeRequest(extend(requestParameters, { type: 'arrayBuffer' }), callback);\n};\n\nexport const postData = function(requestParameters: RequestParameters, callback: ResponseCallback<string>): Cancelable {\n    return makeRequest(extend(requestParameters, { method: 'POST' }), callback);\n};\n\nfunction sameOrigin(url) {\n    const a: HTMLAnchorElement = window.document.createElement('a');\n    a.href = url;\n    return a.protocol === window.document.location.protocol && a.host === window.document.location.host;\n}\n\nconst transparentPngUrl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=';\n\nlet imageQueue, numImageRequests;\nexport const resetImageRequestQueue = () => {\n    imageQueue = [];\n    numImageRequests = 0;\n};\nresetImageRequestQueue();\n\nexport const getImage = function(requestParameters: RequestParameters, callback: Callback<HTMLImageElement>): Cancelable {\n    // limit concurrent image loads to help with raster sources performance on big screens\n    if (numImageRequests >= config.MAX_PARALLEL_IMAGE_REQUESTS) {\n        const queued = {requestParameters, callback, cancelled: false};\n        imageQueue.push(queued);\n        return { cancel() { queued.cancelled = true; } };\n    }\n    numImageRequests++;\n\n    let advanced = false;\n    const advanceImageRequestQueue = () => {\n        if (advanced) return;\n        advanced = true;\n        numImageRequests--;\n        assert(numImageRequests >= 0);\n        while (imageQueue.length && numImageRequests < config.MAX_PARALLEL_IMAGE_REQUESTS) { // eslint-disable-line\n            const {requestParameters, callback, cancelled} = imageQueue.shift();\n            if (!cancelled) {\n                getImage(requestParameters, callback);\n            }\n        }\n    };\n\n    // request the image with XHR to work around caching issues\n    // see https://github.com/mapbox/mapbox-gl-js/issues/1470\n    const request = getArrayBuffer(requestParameters, (err: ?Error, data: ?ArrayBuffer, cacheControl: ?string, expires: ?string) => {\n\n        advanceImageRequestQueue();\n\n        if (err) {\n            callback(err);\n        } else if (data) {\n            const img: HTMLImageElement = new window.Image();\n            const URL = window.URL || window.webkitURL;\n            img.onload = () => {\n                callback(null, img);\n                URL.revokeObjectURL(img.src);\n            };\n            img.onerror = () => callback(new Error('Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.'));\n            const blob: Blob = new window.Blob([new Uint8Array(data)], { type: 'image/png' });\n            (img: any).cacheControl = cacheControl;\n            (img: any).expires = expires;\n            img.src = data.byteLength ? URL.createObjectURL(blob) : transparentPngUrl;\n        }\n    });\n\n    return {\n        cancel: () => {\n            request.cancel();\n            advanceImageRequestQueue();\n        }\n    };\n};\n\nexport const getVideo = function(urls: Array<string>, callback: Callback<HTMLVideoElement>): Cancelable {\n    const video: HTMLVideoElement = window.document.createElement('video');\n    video.muted = true;\n    video.onloadstart = function() {\n        callback(null, video);\n    };\n    for (let i = 0; i < urls.length; i++) {\n        const s: HTMLSourceElement = window.document.createElement('source');\n        if (!sameOrigin(urls[i])) {\n            video.crossOrigin = 'Anonymous';\n        }\n        s.src = urls[i];\n        video.appendChild(s);\n    }\n    return { cancel: () => {} };\n};\n","// @flow\n\nimport { extend } from './util';\n\ntype Listener = (Object) => any;\ntype Listeners = { [string]: Array<Listener> };\n\nfunction _addEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    const listenerExists = listenerList[type] && listenerList[type].indexOf(listener) !== -1;\n    if (!listenerExists) {\n        listenerList[type] = listenerList[type] || [];\n        listenerList[type].push(listener);\n    }\n}\n\nfunction _removeEventListener(type: string, listener: Listener, listenerList: Listeners) {\n    if (listenerList && listenerList[type]) {\n        const index = listenerList[type].indexOf(listener);\n        if (index !== -1) {\n            listenerList[type].splice(index, 1);\n        }\n    }\n}\n\nexport class Event {\n    +type: string;\n\n    constructor(type: string, data: Object = {}) {\n        extend(this, data);\n        this.type = type;\n    }\n}\n\nexport class ErrorEvent extends Event {\n    error: Error;\n\n    constructor(error: Error, data: Object = {}) {\n        super('error', extend({error}, data));\n    }\n}\n\n/**\n * Methods mixed in to other classes for event capabilities.\n *\n * @mixin Evented\n */\nexport class Evented {\n    _listeners: Listeners;\n    _oneTimeListeners: Listeners;\n    _eventedParent: ?Evented;\n    _eventedParentData: ?(Object | () => Object);\n\n    /**\n     * Adds a listener to a specified event type.\n     *\n     * @param {string} type The event type to add a listen for.\n     * @param {Function} listener The function to be called when the event is fired.\n     *   The listener function is called with the data object passed to `fire`,\n     *   extended with `target` and `type` properties.\n     * @returns {Object} `this`\n     */\n    on(type: *, listener: Listener): this {\n        this._listeners = this._listeners || {};\n        _addEventListener(type, listener, this._listeners);\n\n        return this;\n    }\n\n    /**\n     * Removes a previously registered event listener.\n     *\n     * @param {string} type The event type to remove listeners for.\n     * @param {Function} listener The listener function to remove.\n     * @returns {Object} `this`\n     */\n    off(type: *, listener: Listener) {\n        _removeEventListener(type, listener, this._listeners);\n        _removeEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    /**\n     * Adds a listener that will be called only once to a specified event type.\n     *\n     * The listener will be called first time the event fires after the listener is registered.\n     *\n     * @param {string} type The event type to listen for.\n     * @param {Function} listener The function to be called when the event is fired the first time.\n     * @returns {Object} `this`\n     */\n    once(type: string, listener: Listener) {\n        this._oneTimeListeners = this._oneTimeListeners || {};\n        _addEventListener(type, listener, this._oneTimeListeners);\n\n        return this;\n    }\n\n    fire(event: Event, properties?: Object) {\n        // Compatibility with (type: string, properties: Object) signature from previous versions.\n        // See https://github.com/mapbox/mapbox-gl-js/issues/6522,\n        //     https://github.com/mapbox/mapbox-gl-draw/issues/766\n        if (typeof event === 'string') {\n            event = new Event(event, properties || {});\n        }\n\n        const type = event.type;\n\n        if (this.listens(type)) {\n            (event: any).target = this;\n\n            // make sure adding or removing listeners inside other listeners won't cause an infinite loop\n            const listeners = this._listeners && this._listeners[type] ? this._listeners[type].slice() : [];\n            for (const listener of listeners) {\n                listener.call(this, event);\n            }\n\n            const oneTimeListeners = this._oneTimeListeners && this._oneTimeListeners[type] ? this._oneTimeListeners[type].slice() : [];\n            for (const listener of oneTimeListeners) {\n                _removeEventListener(type, listener, this._oneTimeListeners);\n                listener.call(this, event);\n            }\n\n            const parent = this._eventedParent;\n            if (parent) {\n                extend(\n                    event,\n                    typeof this._eventedParentData === 'function' ? this._eventedParentData() : this._eventedParentData\n                );\n                parent.fire(event);\n            }\n\n        // To ensure that no error events are dropped, print them to the\n        // console if they have no listeners.\n        } else if (event instanceof ErrorEvent) {\n            console.error(event.error);\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns a true if this instance of Evented or any forwardeed instances of Evented have a listener for the specified type.\n     *\n     * @param {string} type The event type\n     * @returns {boolean} `true` if there is at least one registered listener for specified event type, `false` otherwise\n     * @private\n     */\n    listens(type: string) {\n        return (\n            (this._listeners && this._listeners[type] && this._listeners[type].length > 0) ||\n            (this._oneTimeListeners && this._oneTimeListeners[type] && this._oneTimeListeners[type].length > 0) ||\n            (this._eventedParent && this._eventedParent.listens(type))\n        );\n    }\n\n    /**\n     * Bubble all events fired by this instance of Evented to this parent instance of Evented.\n     *\n     * @private\n     * @returns {Object} `this`\n     * @private\n     */\n    setEventedParent(parent: ?Evented, data?: Object | () => Object) {\n        this._eventedParent = parent;\n        this._eventedParentData = data;\n\n        return this;\n    }\n}\n","var SphericalMercator = (function(){\n\n// Closures including constants and other precalculated values.\nvar cache = {},\n    EPSLN = 1.0e-10,\n    D2R = Math.PI / 180,\n    R2D = 180 / Math.PI,\n    // 900913 properties.\n    A = 6378137.0,\n    MAXEXTENT = 20037508.342789244;\n\nfunction isFloat(n){\n    return Number(n) === n && n % 1 !== 0;\n}\n\n// SphericalMercator constructor: precaches calculations\n// for fast tile lookups.\nfunction SphericalMercator(options) {\n    options = options || {};\n    this.size = options.size || 256;\n    if (!cache[this.size]) {\n        var size = this.size;\n        var c = cache[this.size] = {};\n        c.Bc = [];\n        c.Cc = [];\n        c.zc = [];\n        c.Ac = [];\n        for (var d = 0; d < 30; d++) {\n            c.Bc.push(size / 360);\n            c.Cc.push(size / (2 * Math.PI));\n            c.zc.push(size / 2);\n            c.Ac.push(size);\n            size *= 2;\n        }\n    }\n    this.Bc = cache[this.size].Bc;\n    this.Cc = cache[this.size].Cc;\n    this.zc = cache[this.size].zc;\n    this.Ac = cache[this.size].Ac;\n};\n\n// Convert lon lat to screen pixel value\n//\n// - `ll` {Array} `[lon, lat]` array of geographic coordinates.\n// - `zoom` {Number} zoom level.\nSphericalMercator.prototype.px = function(ll, zoom) {\n  if (isFloat(zoom)) {\n    var size = this.size * Math.pow(2, zoom);\n    var d = size / 2;\n    var bc = (size / 360);\n    var cc = (size / (2 * Math.PI));\n    var ac = size;\n    var f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n    var x = d + ll[0] * bc;\n    var y = d + 0.5 * Math.log((1 + f) / (1 - f)) * -cc;\n    (x > ac) && (x = ac);\n    (y > ac) && (y = ac);\n    //(x < 0) && (x = 0);\n    //(y < 0) && (y = 0);\n    return [x, y];\n  } else {\n    var d = this.zc[zoom];\n    var f = Math.min(Math.max(Math.sin(D2R * ll[1]), -0.9999), 0.9999);\n    var x = Math.round(d + ll[0] * this.Bc[zoom]);\n    var y = Math.round(d + 0.5 * Math.log((1 + f) / (1 - f)) * (-this.Cc[zoom]));\n    (x > this.Ac[zoom]) && (x = this.Ac[zoom]);\n    (y > this.Ac[zoom]) && (y = this.Ac[zoom]);\n    //(x < 0) && (x = 0);\n    //(y < 0) && (y = 0);\n    return [x, y];\n  }\n};\n\n// Convert screen pixel value to lon lat\n//\n// - `px` {Array} `[x, y]` array of geographic coordinates.\n// - `zoom` {Number} zoom level.\nSphericalMercator.prototype.ll = function(px, zoom) {\n  if (isFloat(zoom)) {\n    var size = this.size * Math.pow(2, zoom);\n    var bc = (size / 360);\n    var cc = (size / (2 * Math.PI));\n    var zc = size / 2;\n    var g = (px[1] - zc) / -cc;\n    var lon = (px[0] - zc) / bc;\n    var lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n    return [lon, lat];\n  } else {\n    var g = (px[1] - this.zc[zoom]) / (-this.Cc[zoom]);\n    var lon = (px[0] - this.zc[zoom]) / this.Bc[zoom];\n    var lat = R2D * (2 * Math.atan(Math.exp(g)) - 0.5 * Math.PI);\n    return [lon, lat];\n  }\n};\n\n// Convert tile xyz value to bbox of the form `[w, s, e, n]`\n//\n// - `x` {Number} x (longitude) number.\n// - `y` {Number} y (latitude) number.\n// - `zoom` {Number} zoom.\n// - `tms_style` {Boolean} whether to compute using tms-style.\n// - `srs` {String} projection for resulting bbox (WGS84|900913).\n// - `return` {Array} bbox array of values in form `[w, s, e, n]`.\nSphericalMercator.prototype.bbox = function(x, y, zoom, tms_style, srs) {\n    // Convert xyz into bbox with srs WGS84\n    if (tms_style) {\n        y = (Math.pow(2, zoom) - 1) - y;\n    }\n    // Use +y to make sure it's a number to avoid inadvertent concatenation.\n    var ll = [x * this.size, (+y + 1) * this.size]; // lower left\n    // Use +x to make sure it's a number to avoid inadvertent concatenation.\n    var ur = [(+x + 1) * this.size, y * this.size]; // upper right\n    var bbox = this.ll(ll, zoom).concat(this.ll(ur, zoom));\n\n    // If web mercator requested reproject to 900913.\n    if (srs === '900913') {\n        return this.convert(bbox, '900913');\n    } else {\n        return bbox;\n    }\n};\n\n// Convert bbox to xyx bounds\n//\n// - `bbox` {Number} bbox in the form `[w, s, e, n]`.\n// - `zoom` {Number} zoom.\n// - `tms_style` {Boolean} whether to compute using tms-style.\n// - `srs` {String} projection of input bbox (WGS84|900913).\n// - `@return` {Object} XYZ bounds containing minX, maxX, minY, maxY properties.\nSphericalMercator.prototype.xyz = function(bbox, zoom, tms_style, srs) {\n    // If web mercator provided reproject to WGS84.\n    if (srs === '900913') {\n        bbox = this.convert(bbox, 'WGS84');\n    }\n\n    var ll = [bbox[0], bbox[1]]; // lower left\n    var ur = [bbox[2], bbox[3]]; // upper right\n    var px_ll = this.px(ll, zoom);\n    var px_ur = this.px(ur, zoom);\n    // Y = 0 for XYZ is the top hence minY uses px_ur[1].\n    var x = [ Math.floor(px_ll[0] / this.size), Math.floor((px_ur[0] - 1) / this.size) ];\n    var y = [ Math.floor(px_ur[1] / this.size), Math.floor((px_ll[1] - 1) / this.size) ];\n    var bounds = {\n        minX: Math.min.apply(Math, x) < 0 ? 0 : Math.min.apply(Math, x),\n        minY: Math.min.apply(Math, y) < 0 ? 0 : Math.min.apply(Math, y),\n        maxX: Math.max.apply(Math, x),\n        maxY: Math.max.apply(Math, y)\n    };\n    if (tms_style) {\n        var tms = {\n            minY: (Math.pow(2, zoom) - 1) - bounds.maxY,\n            maxY: (Math.pow(2, zoom) - 1) - bounds.minY\n        };\n        bounds.minY = tms.minY;\n        bounds.maxY = tms.maxY;\n    }\n    return bounds;\n};\n\n// Convert projection of given bbox.\n//\n// - `bbox` {Number} bbox in the form `[w, s, e, n]`.\n// - `to` {String} projection of output bbox (WGS84|900913). Input bbox\n//   assumed to be the \"other\" projection.\n// - `@return` {Object} bbox with reprojected coordinates.\nSphericalMercator.prototype.convert = function(bbox, to) {\n    if (to === '900913') {\n        return this.forward(bbox.slice(0, 2)).concat(this.forward(bbox.slice(2,4)));\n    } else {\n        return this.inverse(bbox.slice(0, 2)).concat(this.inverse(bbox.slice(2,4)));\n    }\n};\n\n// Convert lon/lat values to 900913 x/y.\nSphericalMercator.prototype.forward = function(ll) {\n    var xy = [\n        A * ll[0] * D2R,\n        A * Math.log(Math.tan((Math.PI*0.25) + (0.5 * ll[1] * D2R)))\n    ];\n    // if xy value is beyond maxextent (e.g. poles), return maxextent.\n    (xy[0] > MAXEXTENT) && (xy[0] = MAXEXTENT);\n    (xy[0] < -MAXEXTENT) && (xy[0] = -MAXEXTENT);\n    (xy[1] > MAXEXTENT) && (xy[1] = MAXEXTENT);\n    (xy[1] < -MAXEXTENT) && (xy[1] = -MAXEXTENT);\n    return xy;\n};\n\n// Convert 900913 x/y values to lon/lat.\nSphericalMercator.prototype.inverse = function(xy) {\n    return [\n        (xy[0] * R2D / A),\n        ((Math.PI*0.5) - 2.0 * Math.atan(Math.exp(-xy[1] / A))) * R2D\n    ];\n};\n\nreturn SphericalMercator;\n\n})();\n\nif (typeof module !== 'undefined' && typeof exports !== 'undefined') {\n    module.exports = exports = SphericalMercator;\n}\n","import { pick } from 'mapbox-gl/src/util/util';\nimport { getJSON } from 'mapbox-gl/src/util/ajax';\nimport browser from 'mapbox-gl/src/util/browser';\nimport SphericalMercator from '@mapbox/sphericalmercator';\n\n//Contains code from esri-leaflet https://github.com/Esri/esri-leaflet\nconst MercatorZoomLevels = {\n    '0': 156543.03392799999,\n    '1': 78271.516963999893,\n    '2': 39135.758482000099,\n    '3': 19567.879240999901,\n    '4': 9783.9396204999593,\n    '5': 4891.9698102499797,\n    '6': 2445.9849051249898,\n    '7': 1222.9924525624899,\n    '8': 611.49622628138002,\n    '9': 305.74811314055802,\n    '10': 152.874056570411,\n    '11': 76.437028285073197,\n    '12': 38.218514142536598,\n    '13': 19.109257071268299,\n    '14': 9.5546285356341496,\n    '15': 4.7773142679493699,\n    '16': 2.38865713397468,\n    '17': 1.1943285668550501,\n    '18': 0.59716428355981699,\n    '19': 0.29858214164761698,\n    '20': 0.14929107082381,\n    '21': 0.07464553541191,\n    '22': 0.0373227677059525,\n    '23': 0.0186613838529763\n};\n\nconst _withinPercentage = function (a, b, percentage) {\n    const diff = Math.abs((a / b) - 1);\n    return diff < percentage;\n};\n\nexport default function(options, callback) {\n    const loaded = function(err, metadata) {\n        if (err) {\n            return callback(err);\n        }\n\n        const result = pick(metadata,\n            ['tileInfo', 'initialExtent', 'fullExtent', 'spatialReference', 'tileServers', 'documentInfo']);\n\n        result._lodMap = {};\n        const zoomOffsetAllowance = 0.1;\n        const sr = metadata.spatialReference.latestWkid || metadata.spatialReference.wkid;\n        if (sr === 102100 || sr === 3857) {\n\n            /*\n            Example extent from ArcGIS REST API\n            fullExtent: {\n            xmin: -9144791.679226127,\n            ymin: -2195190.961437726,\n            xmax: -4650987.072019983,\n            ymax: 1118113.110155766,\n            spatialReference: {\n            wkid: 102100,\n            wkt: null\n            }\n            },\n            */\n            //convert ArcGIS extent to bounds\n            const extent = metadata.fullExtent;\n            if (extent && extent.spatialReference && extent.spatialReference.wkid ===  102100) {\n                const boundsWebMercator = [extent.xmin, extent.ymin, extent.xmax, extent.ymax];\n                var merc = new SphericalMercator({\n                    size: 256\n                });\n                const boundsWGS84 = merc.convert(boundsWebMercator);\n                result.bounds = boundsWGS84;\n            }\n\n            // create the zoom level data\n            const arcgisLODs = metadata.tileInfo.lods;\n            const correctResolutions = MercatorZoomLevels;\n            result.minzoom = arcgisLODs[0].level;\n            result.maxzoom = arcgisLODs[arcgisLODs.length - 1].level;\n            for (let i = 0; i < arcgisLODs.length; i++) {\n                const arcgisLOD = arcgisLODs[i];\n                for (const ci in correctResolutions) {\n                    const correctRes = correctResolutions[ci];\n\n                    if (_withinPercentage(arcgisLOD.resolution, correctRes, zoomOffsetAllowance)) {\n                        result._lodMap[ci] = arcgisLOD.level;\n                        break;\n                    }\n                }\n            }\n        } else {\n            callback(new Error('non-mercator spatial reference'));\n        }\n\n        callback(null, result);\n    };\n\n    if (options.url) {\n        getJSON({url: options.url}, loaded);\n    } else {\n        browser.frame(loaded.bind(null, null, options));\n    }\n};\n","// @flow\n\nimport { wrap } from '../util/util';\nimport LngLatBounds from './lng_lat_bounds';\n\n/**\n * A `LngLat` object represents a given longitude and latitude coordinate, measured in degrees.\n *\n * Mapbox GL uses longitude, latitude coordinate order (as opposed to latitude, longitude) to match GeoJSON.\n *\n * Note that any Mapbox GL method that accepts a `LngLat` object as an argument or option\n * can also accept an `Array` of two numbers and will perform an implicit conversion.\n * This flexible type is documented as {@link LngLatLike}.\n *\n * @param {number} lng Longitude, measured in degrees.\n * @param {number} lat Latitude, measured in degrees.\n * @example\n * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n * @see [Get coordinates of the mouse pointer](https://www.mapbox.com/mapbox-gl-js/example/mouse-position/)\n * @see [Display a popup](https://www.mapbox.com/mapbox-gl-js/example/popup/)\n * @see [Highlight features within a bounding box](https://www.mapbox.com/mapbox-gl-js/example/using-box-queryrenderedfeatures/)\n * @see [Create a timeline animation](https://www.mapbox.com/mapbox-gl-js/example/timeline-animation/)\n */\nclass LngLat {\n    lng: number;\n    lat: number;\n\n    constructor(lng: number, lat: number) {\n        if (isNaN(lng) || isNaN(lat)) {\n            throw new Error(`Invalid LngLat object: (${lng}, ${lat})`);\n        }\n        this.lng = +lng;\n        this.lat = +lat;\n        if (this.lat > 90 || this.lat < -90) {\n            throw new Error('Invalid LngLat latitude value: must be between -90 and 90');\n        }\n    }\n\n    /**\n     * Returns a new `LngLat` object whose longitude is wrapped to the range (-180, 180).\n     *\n     * @returns {LngLat} The wrapped `LngLat` object.\n     * @example\n     * var ll = new mapboxgl.LngLat(286.0251, 40.7736);\n     * var wrapped = ll.wrap();\n     * wrapped.lng; // = -73.9749\n     */\n    wrap() {\n        return new LngLat(wrap(this.lng, -180, 180), this.lat);\n    }\n\n    /**\n     * Returns the coordinates represented as an array of two numbers.\n     *\n     * @returns {Array<number>} The coordinates represeted as an array of longitude and latitude.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toArray(); // = [-73.9749, 40.7736]\n     */\n    toArray() {\n        return [this.lng, this.lat];\n    }\n\n    /**\n     * Returns the coordinates represent as a string.\n     *\n     * @returns {string} The coordinates represented as a string of the format `'LngLat(lng, lat)'`.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toString(); // = \"LngLat(-73.9749, 40.7736)\"\n     */\n    toString() {\n        return `LngLat(${this.lng}, ${this.lat})`;\n    }\n\n    /**\n     * Returns a `LngLatBounds` from the coordinates extended by a given `radius`.\n     *\n     * @param {number} radius Distance in meters from the coordinates to extend the bounds.\n     * @returns {LngLatBounds} A new `LngLatBounds` object representing the coordinates extended by the `radius`.\n     * @example\n     * var ll = new mapboxgl.LngLat(-73.9749, 40.7736);\n     * ll.toBounds(100).toArray(); // = [[-73.97501862141328, 40.77351016847229], [-73.97478137858673, 40.77368983152771]]\n     */\n    toBounds(radius: number) {\n        const earthCircumferenceInMetersAtEquator = 40075017;\n        const latAccuracy = 360 * radius / earthCircumferenceInMetersAtEquator,\n            lngAccuracy = latAccuracy / Math.cos((Math.PI / 180) * this.lat);\n\n        return new LngLatBounds(new LngLat(this.lng - lngAccuracy, this.lat - latAccuracy),\n            new LngLat(this.lng + lngAccuracy, this.lat + latAccuracy));\n    }\n\n    /**\n     * Converts an array of two numbers or an object with `lng` and `lat` or `lon` and `lat` properties\n     * to a `LngLat` object.\n     *\n     * If a `LngLat` object is passed in, the function returns it unchanged.\n     *\n     * @param {LngLatLike} input An array of two numbers or object to convert, or a `LngLat` object to return.\n     * @returns {LngLat} A new `LngLat` object, if a conversion occurred, or the original `LngLat` object.\n     * @example\n     * var arr = [-73.9749, 40.7736];\n     * var ll = mapboxgl.LngLat.convert(arr);\n     * ll;   // = LngLat {lng: -73.9749, lat: 40.7736}\n     */\n    static convert(input: LngLatLike): LngLat {\n        if (input instanceof LngLat) {\n            return input;\n        }\n        if (Array.isArray(input) && (input.length === 2 || input.length === 3)) {\n            return new LngLat(Number(input[0]), Number(input[1]));\n        }\n        if (!Array.isArray(input) && typeof input === 'object' && input !== null) {\n            return new LngLat(\n                // flow can't refine this to have one of lng or lat, so we have to cast to any\n                Number('lng' in input ? (input: any).lng : (input: any).lon),\n                Number(input.lat)\n            );\n        }\n        throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n    }\n}\n\n/**\n * A {@link LngLat} object, an array of two numbers representing longitude and latitude,\n * or an object with `lng` and `lat` or `lon` and `lat` properties.\n *\n * @typedef {LngLat | {lng: number, lat: number} | {lon: number, lat: number} | [number, number]} LngLatLike\n * @example\n * var v1 = new mapboxgl.LngLat(-122.420679, 37.772537);\n * var v2 = [-122.420679, 37.772537];\n * var v3 = {lon: -122.420679, lat: 37.772537};\n */\nexport type LngLatLike = LngLat | {lng: number, lat: number} | {lon: number, lat: number} | [number, number];\n\nexport default LngLat;\n","// @flow\n\nimport LngLat from './lng_lat';\n\nimport type {LngLatLike} from './lng_lat';\n\n/**\n * A `LngLatBounds` object represents a geographical bounding box,\n * defined by its southwest and northeast points in longitude and latitude.\n *\n * If no arguments are provided to the constructor, a `null` bounding box is created.\n *\n * Note that any Mapbox GL method that accepts a `LngLatBounds` object as an argument or option\n * can also accept an `Array` of two {@link LngLatLike} constructs and will perform an implicit conversion.\n * This flexible type is documented as {@link LngLatBoundsLike}.\n *\n * @param {LngLatLike} [sw] The southwest corner of the bounding box.\n * @param {LngLatLike} [ne] The northeast corner of the bounding box.\n * @example\n * var sw = new mapboxgl.LngLat(-73.9876, 40.7661);\n * var ne = new mapboxgl.LngLat(-73.9397, 40.8002);\n * var llb = new mapboxgl.LngLatBounds(sw, ne);\n */\nclass LngLatBounds {\n    _ne: LngLat;\n    _sw: LngLat;\n\n    // This constructor is too flexible to type. It should not be so flexible.\n    constructor(sw: any, ne: any) {\n        if (!sw) {\n            // noop\n        } else if (ne) {\n            this.setSouthWest(sw).setNorthEast(ne);\n        } else if (sw.length === 4) {\n            this.setSouthWest([sw[0], sw[1]]).setNorthEast([sw[2], sw[3]]);\n        } else {\n            this.setSouthWest(sw[0]).setNorthEast(sw[1]);\n        }\n    }\n\n    /**\n     * Set the northeast corner of the bounding box\n     *\n     * @param {LngLatLike} ne\n     * @returns {LngLatBounds} `this`\n     */\n    setNorthEast(ne: LngLatLike) {\n        this._ne = ne instanceof LngLat ? new LngLat(ne.lng, ne.lat) : LngLat.convert(ne);\n        return this;\n    }\n\n    /**\n     * Set the southwest corner of the bounding box\n     *\n     * @param {LngLatLike} sw\n     * @returns {LngLatBounds} `this`\n     */\n    setSouthWest(sw: LngLatLike) {\n        this._sw = sw instanceof LngLat ? new LngLat(sw.lng, sw.lat) : LngLat.convert(sw);\n        return this;\n    }\n\n    /**\n     * Extend the bounds to include a given LngLat or LngLatBounds.\n     *\n     * @param {LngLat|LngLatBounds} obj object to extend to\n     * @returns {LngLatBounds} `this`\n     */\n    extend(obj: LngLat | LngLatBounds) {\n        const sw = this._sw,\n            ne = this._ne;\n        let sw2, ne2;\n\n        if (obj instanceof LngLat) {\n            sw2 = obj;\n            ne2 = obj;\n\n        } else if (obj instanceof LngLatBounds) {\n            sw2 = obj._sw;\n            ne2 = obj._ne;\n\n            if (!sw2 || !ne2) return this;\n\n        } else {\n            if (Array.isArray(obj)) {\n                if (obj.every(Array.isArray)) {\n                    return this.extend(LngLatBounds.convert(obj));\n                } else {\n                    return this.extend(LngLat.convert(obj));\n                }\n            }\n            return this;\n        }\n\n        if (!sw && !ne) {\n            this._sw = new LngLat(sw2.lng, sw2.lat);\n            this._ne = new LngLat(ne2.lng, ne2.lat);\n\n        } else {\n            sw.lng = Math.min(sw2.lng, sw.lng);\n            sw.lat = Math.min(sw2.lat, sw.lat);\n            ne.lng = Math.max(ne2.lng, ne.lng);\n            ne.lat = Math.max(ne2.lat, ne.lat);\n        }\n\n        return this;\n    }\n\n    /**\n     * Returns the geographical coordinate equidistant from the bounding box's corners.\n     *\n     * @returns {LngLat} The bounding box's center.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.getCenter(); // = LngLat {lng: -73.96365, lat: 40.78315}\n     */\n    getCenter(): LngLat {\n        return new LngLat((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n    }\n\n    /**\n     * Returns the southwest corner of the bounding box.\n     *\n     * @returns {LngLat} The southwest corner of the bounding box.\n     */\n    getSouthWest(): LngLat { return this._sw; }\n\n    /**\n    * Returns the northeast corner of the bounding box.\n    *\n    * @returns {LngLat} The northeast corner of the bounding box.\n     */\n    getNorthEast(): LngLat { return this._ne; }\n\n    /**\n    * Returns the northwest corner of the bounding box.\n    *\n    * @returns {LngLat} The northwest corner of the bounding box.\n     */\n    getNorthWest(): LngLat { return new LngLat(this.getWest(), this.getNorth()); }\n\n    /**\n    * Returns the southeast corner of the bounding box.\n    *\n    * @returns {LngLat} The southeast corner of the bounding box.\n     */\n    getSouthEast(): LngLat { return new LngLat(this.getEast(), this.getSouth()); }\n\n    /**\n    * Returns the west edge of the bounding box.\n    *\n    * @returns {number} The west edge of the bounding box.\n     */\n    getWest(): number { return this._sw.lng; }\n\n    /**\n    * Returns the south edge of the bounding box.\n    *\n    * @returns {number} The south edge of the bounding box.\n     */\n    getSouth(): number { return this._sw.lat; }\n\n    /**\n    * Returns the east edge of the bounding box.\n    *\n    * @returns {number} The east edge of the bounding box.\n     */\n    getEast(): number { return this._ne.lng; }\n\n    /**\n    * Returns the north edge of the bounding box.\n    *\n    * @returns {number} The north edge of the bounding box.\n     */\n    getNorth(): number { return this._ne.lat; }\n\n    /**\n     * Returns the bounding box represented as an array.\n     *\n     * @returns {Array<Array<number>>} The bounding box represented as an array, consisting of the\n     *   southwest and northeast coordinates of the bounding represented as arrays of numbers.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.toArray(); // = [[-73.9876, 40.7661], [-73.9397, 40.8002]]\n     */\n    toArray() {\n        return [this._sw.toArray(), this._ne.toArray()];\n    }\n\n    /**\n     * Return the bounding box represented as a string.\n     *\n     * @returns {string} The bounding box represents as a string of the format\n     *   `'LngLatBounds(LngLat(lng, lat), LngLat(lng, lat))'`.\n     * @example\n     * var llb = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002]);\n     * llb.toString(); // = \"LngLatBounds(LngLat(-73.9876, 40.7661), LngLat(-73.9397, 40.8002))\"\n     */\n    toString() {\n        return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;\n    }\n\n    /**\n     * Check if the bounding box is an empty/`null`-type box.\n     *\n     * @returns {boolean} True if bounds have been defined, otherwise false.\n     */\n    isEmpty() {\n        return !(this._sw && this._ne);\n    }\n\n    /**\n     * Converts an array to a `LngLatBounds` object.\n     *\n     * If a `LngLatBounds` object is passed in, the function returns it unchanged.\n     *\n     * Internally, the function calls `LngLat#convert` to convert arrays to `LngLat` values.\n     *\n     * @param {LngLatBoundsLike} input An array of two coordinates to convert, or a `LngLatBounds` object to return.\n     * @returns {LngLatBounds} A new `LngLatBounds` object, if a conversion occurred, or the original `LngLatBounds` object.\n     * @example\n     * var arr = [[-73.9876, 40.7661], [-73.9397, 40.8002]];\n     * var llb = mapboxgl.LngLatBounds.convert(arr);\n     * llb;   // = LngLatBounds {_sw: LngLat {lng: -73.9876, lat: 40.7661}, _ne: LngLat {lng: -73.9397, lat: 40.8002}}\n     */\n    static convert(input: LngLatBoundsLike): LngLatBounds {\n        if (!input || input instanceof LngLatBounds) return input;\n        return new LngLatBounds(input);\n    }\n}\n\n/**\n * A {@link LngLatBounds} object, an array of {@link LngLatLike} objects in [sw, ne] order,\n * or an array of numbers in [west, south, east, north] order.\n *\n * @typedef {LngLatBounds | [LngLatLike, LngLatLike] | [number, number, number, number]} LngLatBoundsLike\n * @example\n * var v1 = new mapboxgl.LngLatBounds(\n *   new mapboxgl.LngLat(-73.9876, 40.7661),\n *   new mapboxgl.LngLat(-73.9397, 40.8002)\n * );\n * var v2 = new mapboxgl.LngLatBounds([-73.9876, 40.7661], [-73.9397, 40.8002])\n * var v3 = [[-73.9876, 40.7661], [-73.9397, 40.8002]];\n */\nexport type LngLatBoundsLike = LngLatBounds | [LngLatLike, LngLatLike] | [number, number, number, number];\n\nexport default LngLatBounds;\n","// @flow\n\nimport LngLat from '../geo/lng_lat';\nimport type {LngLatLike} from '../geo/lng_lat';\n\n/*\n * The circumference of the world in meters at the given latitude.\n */\nfunction circumferenceAtLatitude(latitude: number) {\n    const circumference = 2 * Math.PI * 6378137;\n    return circumference * Math.cos(latitude * Math.PI / 180);\n}\n\nexport function mercatorXfromLng(lng: number) {\n    return (180 + lng) / 360;\n}\n\nexport function mercatorYfromLat(lat: number) {\n    return (180 - (180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360)))) / 360;\n}\n\nexport function mercatorZfromAltitude(altitude: number, lat: number) {\n    return altitude / circumferenceAtLatitude(lat);\n}\n\nexport function lngFromMercatorX(x: number) {\n    return x * 360 - 180;\n}\n\nexport function latFromMercatorY(y: number) {\n    const y2 = 180 - y * 360;\n    return 360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90;\n}\n\nexport function altitudeFromMercatorZ(z: number, y: number) {\n    return z * circumferenceAtLatitude(latFromMercatorY(y));\n}\n\n/**\n * A `MercatorCoordinate` object represents a projected three dimensional position.\n *\n * `MercatorCoordinate` uses the web mercator projection ([EPSG:3857](https://epsg.io/3857)) with slightly different units:\n * - the size of 1 unit is the width of the projected world instead of the \"mercator meter\"\n * - the origin of the coordinate space is at the north-west corner instead of the middle\n *\n * For example, `MercatorCoordinate(0, 0, 0)` is the north-west corner of the mercator world and\n * `MercatorCoordinate(1, 1, 0)` is the south-east corner. If you are familiar with\n * [vector tiles](https://github.com/mapbox/vector-tile-spec) it may be helpful to think\n * of the coordinate space as the `0/0/0` tile with an extent of `1`.\n *\n * The `z` dimension of `MercatorCoordinate` is conformal. A cube in the mercator coordinate space would be rendered as a cube.\n *\n * @param {number} x The x component of the position.\n * @param {number} y The y component of the position.\n * @param {number} z The z component of the position.\n * @example\n * var nullIsland = new mapboxgl.MercatorCoordinate(0.5, 0.5, 0);\n *\n * @see [Add a custom style layer](https://www.mapbox.com/mapbox-gl-js/example/custom-style-layer/)\n */\nclass MercatorCoordinate {\n    x: number;\n    y: number;\n    z: number;\n\n    constructor(x: number, y: number, z: number = 0) {\n        this.x = +x;\n        this.y = +y;\n        this.z = +z;\n    }\n\n    /**\n     * Project a `LngLat` to a `MercatorCoordinate`.\n     *\n     * @param {LngLatLike} lngLatLike The location to project.\n     * @param {number} altitude The altitude in meters of the position.\n     * @returns {MercatorCoordinate} The projected mercator coordinate.\n     * @example\n     * var coord = mapboxgl.MercatorCoordinate.fromLngLat({ lng: 0, lat: 0}, 0);\n     * coord; // MercatorCoordinate(0.5, 0.5, 0)\n     */\n    static fromLngLat(lngLatLike: LngLatLike, altitude: number = 0) {\n        const lngLat = LngLat.convert(lngLatLike);\n\n        return new MercatorCoordinate(\n                mercatorXfromLng(lngLat.lng),\n                mercatorYfromLat(lngLat.lat),\n                mercatorZfromAltitude(altitude, lngLat.lat));\n    }\n\n    /**\n     * Returns the `LngLat` for the coordinate.\n     *\n     * @returns {LngLat} The `LngLat` object.\n     * @example\n     * var coord = new mapboxgl.MercatorCoordinate(0.5, 0.5, 0);\n     * var latLng = coord.toLngLat(); // LngLat(0, 0)\n     */\n    toLngLat() {\n        return new LngLat(\n                lngFromMercatorX(this.x),\n                latFromMercatorY(this.y));\n    }\n\n    /**\n     * Returns the altitude in meters of the coordinate.\n     *\n     * @returns {number} The altitude in meters.\n     * @example\n     * var coord = new mapboxgl.MercatorCoordinate(0, 0, 0.02);\n     * coord.toAltitude(); // 6914.281956295339\n     */\n    toAltitude() {\n        return altitudeFromMercatorZ(this.z, this.y);\n    }\n}\n\nexport default MercatorCoordinate;\n","// @flow\n\nimport LngLatBounds from '../geo/lng_lat_bounds';\nimport {mercatorXfromLng, mercatorYfromLat} from '../geo/mercator_coordinate';\n\nimport type {CanonicalTileID} from './tile_id';\n\nclass TileBounds {\n    bounds: LngLatBounds;\n    minzoom: number;\n    maxzoom: number;\n\n    constructor(bounds: [number, number, number, number], minzoom: ?number, maxzoom: ?number) {\n        this.bounds = LngLatBounds.convert(this.validateBounds(bounds));\n        this.minzoom = minzoom || 0;\n        this.maxzoom = maxzoom || 24;\n    }\n\n    validateBounds(bounds: [number, number, number, number]) {\n        // make sure the bounds property contains valid longitude and latitudes\n        if (!Array.isArray(bounds) || bounds.length !== 4) return [-180, -90, 180, 90];\n        return [Math.max(-180, bounds[0]), Math.max(-90, bounds[1]), Math.min(180, bounds[2]), Math.min(90, bounds[3])];\n    }\n\n    contains(tileID: CanonicalTileID) {\n        const worldSize = Math.pow(2, tileID.z);\n        const level = {\n            minX: Math.floor(mercatorXfromLng(this.bounds.getWest()) * worldSize),\n            minY: Math.floor(mercatorYfromLat(this.bounds.getNorth()) * worldSize),\n            maxX: Math.ceil(mercatorXfromLng(this.bounds.getEast()) * worldSize),\n            maxY: Math.ceil(mercatorYfromLat(this.bounds.getSouth()) * worldSize)\n        };\n        const hit = tileID.x >= level.minX && tileID.x < level.maxX && tileID.y >= level.minY && tileID.y < level.maxY;\n        return hit;\n    }\n}\n\nexport default TileBounds;\n","\n//From https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\nconst _templateRe = /\\{ *([\\w_]+) *\\}/g;\nconst _template = function (str, data) {\n    return str.replace(_templateRe, (str, key) => {\n        let value = data[key];\n\n        if (value === undefined) {\n            throw new Error(`No value provided for variable ${str}`);\n\n        } else if (typeof value === 'function') {\n            value = value(data);\n        }\n        return value;\n    });\n};\n\n//From https://github.com/Leaflet/Leaflet/blob/master/src/layer/tile/TileLayer.js\nconst _getSubdomain = function (tilePoint, subdomains) {\n    if (subdomains) {\n        const index = Math.abs(tilePoint.x + tilePoint.y) % subdomains.length;\n        return subdomains[index];\n    }\n    return null;\n};\n\nexport {\n    _template,\n    _getSubdomain\n};\n","// @flow\n\nimport window from '../util/window';\nconst { HTMLImageElement, HTMLCanvasElement, HTMLVideoElement, ImageData } = window;\n\nimport type Context from '../gl/context';\nimport type {RGBAImage, AlphaImage} from '../util/image';\n\nexport type TextureFormat =\n    | $PropertyType<WebGLRenderingContext, 'RGBA'>\n    | $PropertyType<WebGLRenderingContext, 'ALPHA'>;\nexport type TextureFilter =\n    | $PropertyType<WebGLRenderingContext, 'LINEAR'>\n    | $PropertyType<WebGLRenderingContext, 'LINEAR_MIPMAP_NEAREST'>\n    | $PropertyType<WebGLRenderingContext, 'NEAREST'>;\nexport type TextureWrap =\n    | $PropertyType<WebGLRenderingContext, 'REPEAT'>\n    | $PropertyType<WebGLRenderingContext, 'CLAMP_TO_EDGE'>\n    | $PropertyType<WebGLRenderingContext, 'MIRRORED_REPEAT'>;\n\ntype EmptyImage = {\n    width: number,\n    height: number,\n    data: null\n}\n\nexport type TextureImage =\n    | RGBAImage\n    | AlphaImage\n    | HTMLImageElement\n    | HTMLCanvasElement\n    | HTMLVideoElement\n    | ImageData\n    | EmptyImage;\n\nclass Texture {\n    context: Context;\n    size: [number, number];\n    texture: WebGLTexture;\n    format: TextureFormat;\n    filter: ?TextureFilter;\n    wrap: ?TextureWrap;\n    useMipmap: boolean;\n\n    constructor(context: Context, image: TextureImage, format: TextureFormat, options: ?{ premultiply?: boolean, useMipmap?: boolean }) {\n        this.context = context;\n        this.format = format;\n        this.texture = context.gl.createTexture();\n        this.update(image, options);\n    }\n\n    update(image: TextureImage, options: ?{premultiply?: boolean, useMipmap?: boolean}) {\n        const {width, height} = image;\n        const resize = !this.size || this.size[0] !== width || this.size[1] !== height;\n        const {context} = this;\n        const {gl} = context;\n\n        this.useMipmap = Boolean(options && options.useMipmap);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        context.pixelStoreUnpackFlipY.set(false);\n        context.pixelStoreUnpack.set(1);\n        context.pixelStoreUnpackPremultiplyAlpha.set(this.format === gl.RGBA && (!options || options.premultiply !== false));\n\n        if (resize) {\n            this.size = [width, height];\n\n            if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof HTMLVideoElement || image instanceof ImageData) {\n                gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, gl.UNSIGNED_BYTE, image);\n            } else {\n                gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, gl.UNSIGNED_BYTE, image.data);\n            }\n\n        } else {\n            if (image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof HTMLVideoElement || image instanceof ImageData) {\n                gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            } else {\n                gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, image.data);\n            }\n        }\n\n        if (this.useMipmap && this.isSizePowerOfTwo()) {\n            gl.generateMipmap(gl.TEXTURE_2D);\n        }\n    }\n\n    bind(filter: TextureFilter, wrap: TextureWrap, minFilter: ?TextureFilter) {\n        const {context} = this;\n        const {gl} = context;\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n\n        if (minFilter === gl.LINEAR_MIPMAP_NEAREST && !this.isSizePowerOfTwo()) {\n            minFilter = gl.LINEAR;\n        }\n\n        if (filter !== this.filter) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filter);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minFilter || filter);\n            this.filter = filter;\n        }\n\n        if (wrap !== this.wrap) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap);\n            this.wrap = wrap;\n        }\n    }\n\n    isSizePowerOfTwo() {\n        return this.size[0] === this.size[1] && (Math.log(this.size[0]) / Math.LN2) % 1 === 0;\n    }\n\n    destroy() {\n        const {gl} = this.context;\n        gl.deleteTexture(this.texture);\n        this.texture = (null: any);\n    }\n}\n\nexport default Texture;\n","// @flow\n\nimport { extend, pick } from 'mapbox-gl/src/util/util';\nimport { getImage, ResourceType } from 'mapbox-gl/src/util/ajax';\nimport { Event, ErrorEvent, Evented } from 'mapbox-gl/src/util/evented';\nimport loadArcGISMapServer from './load_arcgis_mapserver';\nimport TileBounds from 'mapbox-gl/src/source/tile_bounds';\nimport {_template, _getSubdomain} from './helpers';\nimport Texture from 'mapbox-gl/src/render/texture';\n\nimport type {Source} from 'mapbox-gl/src/source/source';\nimport type {OverscaledTileID} from 'mapbox-gl/src/source/tile_id';\nimport type Map from 'mapbox-gl/src/ui/map';\nimport type Dispatcher from 'mapbox-gl/src/util/dispatcher';\nimport type Tile from 'mapbox-gl/src/source/tile';\nimport type {Callback} from 'mapbox-gl/src/types/callback';\n\nclass ArcGISTiledMapServiceSource extends Evented implements Source {\n\n    type: 'raster' | 'raster-dem';\n    id: string;\n    minzoom: number;\n    maxzoom: number;\n    url: string;\n    scheme: string;\n    tileSize: number;\n\n    bounds: ?[number, number, number, number];\n    tileBounds: TileBounds;\n    roundZoom: boolean;\n    dispatcher: Dispatcher;\n    map: Map;\n    tiles: Array<string>;\n\n    _loaded: boolean;\n    _options: RasterSourceSpecification | RasterDEMSourceSpecification;\n\n    constructor(id: string, options: RasterSourceSpecification | RasterDEMSourceSpecification, dispatcher: Dispatcher, eventedParent: Evented) {\n        super();\n        this.id = id;\n        this.dispatcher = dispatcher;\n        this.setEventedParent(eventedParent);\n\n        this.type = 'arcgisraster';\n        this.minzoom = 0;\n        this.maxzoom = 22;\n        this.roundZoom = true;\n        this.tileSize = 512;\n        this._loaded = false;\n\n        this._options = extend({}, options);\n        extend(this, pick(options, ['url', 'scheme', 'tileSize']));\n    }\n\n    load() {\n        this.fire(new Event('dataloading', {dataType: 'source'}));\n        loadArcGISMapServer(this._options, (err, metadata) => {\n            if (err) {\n                this.fire(new ErrorEvent(err));\n            } else if (metadata) {\n                extend(this, metadata);\n\n                if (metadata.bounds) {\n                    this.tileBounds = new TileBounds(metadata.bounds, this.minzoom, this.maxzoom);\n                }\n\n            // `content` is included here to prevent a race condition where `Style#_updateSources` is called\n            // before the TileJSON arrives. this makes sure the tiles needed are loaded once TileJSON arrives\n            // ref: https://github.com/mapbox/mapbox-gl-js/pull/4347#discussion_r104418088\n            this.fire(new Event('data', {dataType: 'source', sourceDataType: 'metadata'}));\n            this.fire(new Event('data', {dataType: 'source', sourceDataType: 'content'}));\n            }\n        });\n    }\n\n    onAdd(map: Map) {\n        // set the urls\n        const baseUrl = this.url.split('?')[0];\n        this.tileUrl = `${baseUrl}/tile/{z}/{y}/{x}`;\n\n        const arcgisonline = new RegExp(/tiles.arcgis(online)?\\.com/g);\n        if (arcgisonline.test(this.url)) {\n            this.tileUrl = this.tileUrl.replace('://tiles', '://tiles{s}');\n            this.subdomains = ['1', '2', '3', '4'];\n        }\n\n        if (this.token) {\n            this.tileUrl += (`?token=${this.token}`);\n        }\n        \n        this.map = map;\n        this.load();\n    }\n\n    serialize() {\n        return extend({}, this._options);\n    }\n\n    hasTile(tileID: OverscaledTileID) {\n        return !this.tileBounds || this.tileBounds.contains(tileID.canonical);\n    }\n\n    loadTile(tile: Tile, callback: Callback<void>) {\n        //convert to ags coords\n        const tilePoint = { z: tile.tileID.overscaledZ, x: tile.tileID.canonical.x, y: tile.tileID.canonical.y };\n\n        const url =  _template(this.tileUrl, extend({\n            s: _getSubdomain(tilePoint, this.subdomains),\n            z: (this._lodMap && this._lodMap[tilePoint.z]) ? this._lodMap[tilePoint.z] : tilePoint.z, // try lod map first, then just defualt to zoom level\n            x: tilePoint.x,\n            y: tilePoint.y\n        }, this.options));\n        tile.request = getImage({url},  (err, img) => {\n            delete tile.request;\n\n            if (tile.aborted) {\n                tile.state = 'unloaded';\n                callback(null);\n            } else if (err) {\n                tile.state = 'errored';\n                callback(err);\n            } else if (img) {\n                if (this.map._refreshExpiredTiles) tile.setExpiryData(img);\n                delete (img: any).cacheControl;\n                delete (img: any).expires;\n\n                const context = this.map.painter.context;\n                const gl = context.gl;\n                tile.texture = this.map.painter.getTileTexture(img.width);\n                if (tile.texture) {\n                    tile.texture.update(img, { useMipmap: true });\n                } else {\n                    tile.texture = new Texture(context, img, gl.RGBA, { useMipmap: true });\n                    tile.texture.bind(gl.LINEAR, gl.CLAMP_TO_EDGE, gl.LINEAR_MIPMAP_NEAREST);\n\n                    if (context.extTextureFilterAnisotropic) {\n                        gl.texParameterf(gl.TEXTURE_2D, context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, context.extTextureFilterAnisotropicMax);\n                    }\n                }\n\n                tile.state = 'loaded';\n\n                callback(null);\n            }\n        });\n    }\n\n    abortTile(tile: Tile, callback: Callback<void>) {\n        if (tile.request) {\n            tile.request.cancel();\n            delete tile.request;\n        }\n        callback();\n    }\n\n    unloadTile(tile: Tile, callback: Callback<void>) {\n        if (tile.texture) this.map.painter.saveTileTexture(tile.texture);\n        callback();\n    }\n\n    hasTransition() {\n        return false;\n    }\n}\n\nexport default ArcGISTiledMapServiceSource;"],"names":["extend","dest","sources","src","k","pick","properties","const","result","i","length","let","uuid","b","a","Math","random","toString","replace","validateUuid","str","test","warnOnceHistory","warnOnce","message","console","warn","storageAvailable","type","storage","window","setItem","removeItem","e","glForTesting","webpImgTest","config","API_URL","EVENTS_URL","this","indexOf","REQUIRE_ACCESS_TOKEN","ACCESS_TOKEN","MAX_PARALLEL_IMAGE_REQUESTS","now","performance","bind","Date","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","cancel","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","exported","frame","fn","getImageData","img","canvas","document","createElement","context","getContext","Error","width","height","drawImage","resolveURL","path","href","hardwareConcurrency","navigator","devicePixelRatio","onload","gl","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","isContextLost","deleteTexture","testWebpTextureUpload","onerror","mapboxHTTPURLRe","urlRe","TelemetryEvent","constructor","anonId","eventData","accessToken","queue","pendingRequest","fetchEventData","data","localStorage","getItem","telemEventKey","JSON","parse","saveEventData","lastSuccess","stringify","processRequests","postEvent","timestamp","additionalPayload","callback","eventsUrlObject","url","parts","match","protocol","authority","params","split","parseUrl","push","obj","payload","event","toISOString","userId","finalPayload","request","join","headers","Content-Type","postData","error","queueRequest","MapLoadEvent","super","success","postMapLoadEvent","tileUrls","mapId","shift","id","err","turnstileEvent_","postTurnstileEvent","dueForEvent","nextUpdate","lastUpdate","nextDate","daysElapsed","getDate","enabled.telemetry","mapLoadEvent_","Object","freeze","Unknown","Style","Source","Tile","Glyphs","SpriteImage","SpriteJSON","Image","AJAXError","status","isMapboxHTTPURL","name","getReferrer","WorkerGlobalScope","self","worker","referrer","origin","location","pathname","imageQueue","numImageRequests","makeRequest","fetch","Request","AbortController","requestParameters","controller","method","body","credentials","signal","set","then","response","ok","get","catch","statusText","code","abort","xhr","XMLHttpRequest","open","responseType","setRequestHeader","withCredentials","getResponseHeader","send","getJSON","getImage","queued","cancelled","advanced","advanceImageRequestQueue","getArrayBuffer","cacheControl","expires","URL","webkitURL","revokeObjectURL","blob","Blob","Uint8Array","byteLength","createObjectURL","_addEventListener","listener","listenerList","_removeEventListener","index","splice","Event","ErrorEvent","Evented","on","_listeners","off","_oneTimeListeners","once","fire","listens","target","slice","call","parent","_eventedParent","_eventedParentData","setEventedParent","SphericalMercator","cache","D2R","PI","R2D","A","MAXEXTENT","isFloat","n","Number","options","size","c","Bc","Cc","zc","Ac","d","prototype","px","ll","zoom","pow","bc","cc","ac","f","min","max","sin","x","y","log","round","g","atan","exp","bbox","tms_style","srs","ur","concat","convert","xyz","px_ll","px_ur","floor","bounds","minX","apply","minY","maxX","maxY","tms","to","forward","inverse","xy","tan","module","MercatorZoomLevels","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","_withinPercentage","percentage","abs","LngLat","lng","lat","isNaN","wrap","w","toArray","toBounds","radius","latAccuracy","lngAccuracy","cos","LngLatBounds","input","Array","isArray","lon","sw","ne","setSouthWest","setNorthEast","mercatorXfromLng","mercatorYfromLat","_ne","_sw","sw2","ne2","every","getCenter","getSouthWest","getNorthEast","getNorthWest","getWest","getNorth","getSouthEast","getEast","getSouth","isEmpty","TileBounds","minzoom","maxzoom","validateBounds","contains","tileID","worldSize","z","level","ceil","_templateRe","_getSubdomain","tilePoint","subdomains","Texture","image","format","update","resize","useMipmap","Boolean","pixelStoreUnpackFlipY","pixelStoreUnpack","pixelStoreUnpackPremultiplyAlpha","premultiply","HTMLImageElement","HTMLCanvasElement","HTMLVideoElement","ImageData","texSubImage2D","isSizePowerOfTwo","generateMipmap","filter","minFilter","LINEAR_MIPMAP_NEAREST","LINEAR","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","LN2","destroy","dispatcher","eventedParent","roundZoom","tileSize","_loaded","_options","load","dataType","metadata","tileBounds","sourceDataType","onAdd","map","baseUrl","tileUrl","RegExp","token","serialize","hasTile","canonical","loadTile","tile","overscaledZ","s","_lodMap","key","value","undefined","aborted","state","_refreshExpiredTiles","setExpiryData","painter","getTileTexture","CLAMP_TO_EDGE","extTextureFilterAnisotropic","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","extTextureFilterAnisotropicMax","abortTile","unloadTile","saveTileTexture","hasTransition"],"mappings":"iNAuJO,SAASA,EAAOC,iEACnB,cAAkBC,kBAAS,KAAhBC,OACP,QAAWC,KAAKD,EACZF,EAAKG,GAAKD,EAAIC,GAGtB,OAAOH,EAiBJ,SAASI,EAAKF,EAAaG,GAE9B,IADAC,IAAMC,EAAS,GACNC,EAAI,EAAGA,EAAIH,EAAWI,OAAQD,IAAK,CACxCF,IAAMH,EAAIE,EAAWG,GACjBL,KAAKD,IACLK,EAAOJ,GAAKD,EAAIC,IAGxB,OAAOI,EAGXG,SAiBgBC,IAMZ,OALA,SAASC,EAAEC,GACP,OAAOA,GAAKA,EAAoB,GAAhBC,KAAKC,UAAiBF,EAAI,GAAGG,SAAS,MAEhD,MAAQ,CAAC,MAAQ,KAAO,KAAO,MAAMC,QAAQ,SAAUL,GAE1DA,GASJ,SAASM,EAAaC,GACzB,QAAOA,GAAM,2EAA2EC,KAAKD,GAyGjGb,IAAMe,EAA4C,GAE3C,SAASC,EAASC,GAChBF,EAAgBE,KAEM,oBAAZC,SAAyBA,QAAQC,KAAKF,GACjDF,EAAgBE,IAAW,GA8G5B,SAASG,EAAiBC,GAC7B,IACIrB,IAAMsB,EAAUC,KAAOF,GAGvB,OAFAC,EAAQE,QAAQ,gBAAiB,GACjCF,EAAQG,WAAW,kBACZ,EACT,MAAOC,GACL,OAAO,GCpbf1B,ICCI2B,EAEAC,EDHEC,EAAiB,CACnBC,QAAS,yBACTC,iBACI,OAAsD,IAAlDC,KAAKF,QAAQG,QAAQ,yBACd,qCAEA,uCAGfC,sBAAsB,EACtBC,aAAc,KACdC,4BAA6B,IEhB3BC,EAAMd,KAAOe,aAAef,KAAOe,YAAYD,IACjDd,KAAOe,YAAYD,IAAIE,KAAKhB,KAAOe,aACnCE,KAAKH,IAAIE,KAAKC,MAEZC,EAAMlB,KAAOmB,uBACfnB,KAAOoB,0BACPpB,KAAOqB,6BACPrB,KAAOsB,wBAELC,EAASvB,KAAOwB,sBAClBxB,KAAOyB,yBACPzB,KAAO0B,4BACP1B,KAAO2B,uBAKLC,EAAW,KAKbd,EAEAe,eAAMC,GACFrD,IAAMoD,EAAQX,EAAIY,GAClB,MAAO,CAAEP,yBAAcA,EAAOM,MAGlCE,sBAAaC,GACTvD,IAAMwD,EAASjC,KAAOkC,SAASC,cAAc,UACvCC,EAAUH,EAAOI,WAAW,MAClC,IAAKD,EACD,MAAM,IAAIE,MAAM,sCAKpB,OAHAL,EAAOM,MAAQP,EAAIO,MACnBN,EAAOO,OAASR,EAAIQ,OACpBJ,EAAQK,UAAUT,EAAK,EAAG,EAAGA,EAAIO,MAAOP,EAAIQ,QACrCJ,EAAQL,aAAa,EAAG,EAAGC,EAAIO,MAAOP,EAAIQ,SAGrDE,oBAAWC,GACPlE,IAAMO,EAAIgB,KAAOkC,SAASC,cAAc,KAExC,OADAnD,EAAE4D,KAAOD,EACF3D,EAAE4D,MAGbC,oBAAqB7C,KAAO8C,UAAUD,qBAAuB,EAC7DE,uBAAyB,OAAO/C,KAAO+C,mBDtCvC/C,KAAOkC,YACP7B,EAAcL,KAAOkC,SAASC,cAAc,QAChCa,OAAS,WACb5C,GAqBZ,SAA+B6C,GAI3BxE,IAAMyE,EAAUD,EAAGE,gBACnBF,EAAGG,YAAYH,EAAGI,WAAYH,GAE9B,IAII,GAHAD,EAAGK,WAAWL,EAAGI,WAAY,EAAGJ,EAAGM,KAAMN,EAAGM,KAAMN,EAAGO,cAAenD,GAGhE4C,EAAGQ,gBAAiB,OAG1B,MAAOtD,IAIT8C,EAAGS,cAAcR,GAvCKS,CAAsBvD,GACxCA,EAAe,MAEnBC,EAAYuD,QAAU,WAElBxD,EAAe,MAEnBC,EAAYhC,IAAM,mFEyBhBwF,EAAkB,yDA2FxBpF,IAAMqF,EAAQ,yCAsBd,IAAMC,EAOFC,SAAYlE,GACRW,KAAKX,KAAOA,EACZW,KAAKwD,OAAS,UACTC,UAAY,aAAc,KAAMC,YAAa7D,EAAOM,cACzDH,KAAK2D,MAAQ,GACb3D,KAAK4D,eAAiB,MAZTN,YAejBO,6BACoCzE,EAAiB,gBAM7C,IACIpB,IAAM8F,EAAOvE,KAAOwE,aAAaC,QANtBC,qBAOPH,SACKL,UAAYS,KAAKC,MAAML,IAGhC9F,IAAMK,EAAOkB,KAAOwE,aAAaC,QAVzBC,0BAWJ5F,IAAM2B,KAAKwD,OAASnF,GAC1B,MAAOqB,GACLV,EAAS,sCA/BJsE,YAoCjBc,4BACoChF,EAAiB,gBAI7C,IACIG,KAAOwE,aAAavE,QAHZyE,yBAG6BjE,KAAKwD,QACtCxD,KAAKyD,UAAUY,aACf9E,KAAOwE,aAAavE,QANbyE,oBAMiCC,KAAKI,UAAUtE,KAAKyD,YAElE,MAAO/D,GACLV,EAAS,qCA/CJsE,YAqDjBiB,6BArDiBjB,YA4DjBkB,mBAAUC,EAAmBC,EAAoCC,cACvDC,EAjFd,SAAkBC,GACd7G,IAAM8G,EAAQD,EAAIE,MAAM1B,GACxB,IAAKyB,EACD,MAAM,IAAIjD,MAAM,8BAEpB,MAAO,CACHmD,SAAUF,EAAM,GAChBG,UAAWH,EAAM,GACjB5C,KAAM4C,EAAM,IAAM,IAClBI,OAAQJ,EAAM,GAAKA,EAAM,GAAGK,MAAM,KAAO,IAwENC,CAASvF,EAAOE,YACnD6E,EAAgBM,OAAOG,0BArEZC,EACTJ,EAqEIK,EAAkB,CACpBC,MAAOxF,KAAKX,aACH,IAAImB,KAAKiE,GAAWgB,4BACd,mCAEfC,OAAQ1F,KAAKwD,QAGXmC,EAAejB,EAAoBjH,EAAO8H,EAASb,GAAqBa,EACxEK,EAA6B,CAC/Bf,KAhFOS,EAgFQV,EA/EjBM,EAASI,EAAIJ,OAAO/G,WAAamH,EAAIJ,OAAOW,KAAK,KAAS,GACtDP,iBAAkBA,EAArB,UAAqCA,EAArC,KAAgDJ,GA+E/CY,QAAS,CACLC,eAAgB,mBAEd7B,KAAKI,UAAU,CAACqB,UAGrB/B,eAAiBoC,EAASJ,WAAUK,GACrCjG,EAAK4D,eAAiB,KACtBe,EAASsB,GACTjG,EAAKoE,gBACLpE,EAAKuE,qBApFIjB,YAwFjB4C,sBAAaV,QACJ7B,MAAM0B,KAAKG,GAChBxF,KAAKuE,mBAIN,IAAM4B,cAGT5C,aACI6C,YAAM,YACNpG,KAAKqG,QAAU,6GAGnBC,0BAAiBC,EAAyBC,iBAU1CjC,sCACI,IAAIvE,KAAK4D,gBAAwC,IAAtB5D,KAAK2D,MAAMxF,OAAtC,CACA,MAAwB6B,KAAK2D,MAAM8C,6BAG/BC,GAAM1G,KAAKqG,QAAQK,KAElB1G,KAAKwD,QACNxD,KAAK6D,iBAGJjF,EAAaoB,KAAKwD,UACnBxD,KAAKwD,OAASnF,KAGlB2B,KAAKwE,UAAUC,EAAW,YAAKkC,GACtBA,GACGD,IAAI1G,EAAKqG,QAAQK,IAAM,WAnCTpD,GAsG5BsD,EAAkB,gBA3DpBrD,aACI6C,YAAM,8HAGVS,4BAAmBN,iBAWnBhC,sCACI,IAAIvE,KAAK4D,gBAAwC,IAAtB5D,KAAK2D,MAAMxF,OAAtC,CAIAC,IAAI0I,IAAc9G,KAAKyD,UAAUC,aAAe1D,KAAKyD,UAAUC,cAAgB7D,EAAOM,aAElF2G,IACA9G,KAAKwD,OAASxD,KAAKyD,UAAUY,YAAc,MAE1CrE,KAAKwD,QAAWxD,KAAKyD,UAAUY,aAEhCrE,KAAK6D,iBAGJjF,EAAaoB,KAAKwD,UACnBxD,KAAKwD,OAASnF,IACdyI,GAAc,GAGlB9I,IAAM+I,EAAa/G,KAAK2D,MAAM8C,QAE9B,GAAIzG,KAAKyD,UAAUY,YAAa,CAC5BrG,IAAMgJ,EAAa,IAAIxG,KAAKR,KAAKyD,UAAUY,aACrC4C,EAAW,IAAIzG,KAAKuG,GACpBG,GAAeH,EAAa/G,KAAKyD,UAAUY,mBACjDyC,EAAcA,GAAeI,GAAe,GAAKA,GAAe,GAAKF,EAAWG,YAAcF,EAASE,eAEvGL,GAAc,EAGlB,IAAKA,EACD,OAAO9G,KAAKuE,kBAGhBvE,KAAKwE,UAAUuC,EAAY,CAACK,qBAAqB,YAAST,GACjDA,IACD3G,EAAKyD,UAAUY,YAAc0C,EAC7B/G,EAAKyD,UAAUC,YAAc7D,EAAOM,qBAtDhBmD,IA+D9B+D,GAF4BT,EAAgBC,mBAAmBtG,KAAKqG,GAEpD,IAAIT,GACMkB,EAAcf,iBAAiB/F,KAAK8G,GC9UxC,mBAAjBC,OAAOC,QACdD,OAAOC,OAbU,CACjBC,QAAS,UACTC,MAAO,QACPC,OAAQ,SACRC,KAAM,OACNC,OAAQ,SACRC,YAAa,cACbC,WAAY,aACZC,MAAO,UA2BX,IAAMC,cAGFzE,WAAYtE,EAAiBgJ,EAAgBpD,GAC1B,MAAXoD,GDLZ,SAAyBpD,GACrB,OAAOzB,EAAgBtE,KAAK+F,GCIFqD,CAAgBrD,KAClC5F,GAAW,uHAEfmH,YAAMnH,GACNe,KAAKiI,OAASA,EACdjI,KAAK6E,IAAMA,EAGX7E,KAAKmI,KAAOnI,KAAKuD,YAAY4E,KAC7BnI,KAAKf,QAAUA,4GAGnBP,oBACI,OAAUsB,eAAcA,kBAAiBA,kBAAiBA,KAAnD,QAjBS6B,OA0BXuG,EAA2C,oBAAtBC,mBACS,oBAATC,MACPA,gBAAgBD,oCACjCC,KAAKC,QAAUD,KAAKC,OAAOC,qBAE7BxK,IAAMyK,EAASlJ,KAAOmJ,SAASD,OAC/B,GAAIA,GAAqB,SAAXA,GAAgC,YAAXA,EAC/B,OAAOA,EAASlJ,KAAOmJ,SAASC,UA2E5C3K,IAsBI4K,EAAYC,EAtBVC,EAAcvJ,KAAOwJ,OAASxJ,KAAOyJ,SAAWzJ,KAAO0J,gBAvE7D,SAA0BC,EAAsCvE,GAC5D3G,IAAMmL,EAAa,IAAI5J,KAAO0J,gBACxBrD,EAAU,IAAIrG,KAAOyJ,QAAQE,EAAkBrE,IAAK,CACtDuE,OAAQF,EAAkBE,QAAU,MACpCC,KAAMH,EAAkBG,KACxBC,YAAaJ,EAAkBI,YAC/BxD,QAASoD,EAAkBpD,QAC3B0C,SAAUJ,IACVmB,OAAQJ,EAAWI,SAuBvB,MApB+B,SAA3BL,EAAkB7J,MAClBuG,EAAQE,QAAQ0D,IAAI,SAAU,oBAGlCjK,KAAOwJ,MAAMnD,GAAS6D,cAAKC,GACnBA,EAASC,GACTD,EAASR,EAAkB7J,MAAQ,UAAUoK,cAAKxL,GAC9C0G,EAAS,KAAM1G,EAAQyL,EAAS5D,QAAQ8D,IAAI,iBAAkBF,EAAS5D,QAAQ8D,IAAI,cACpFC,eAAMlD,UAAOhC,EAAS,IAAI9C,MAAM8E,EAAI1H,YAEvC0F,EAAS,IAAIqD,EAAU0B,EAASI,WAAYJ,EAASzB,OAAQiB,EAAkBrE,QAEpFgF,eAAO5D,GACa,KAAfA,EAAM8D,MAIVpF,EAAS,IAAI9C,MAAMoE,EAAMhH,YAGtB,CAAE6B,yBAAcqI,EAAWa,WAGtC,SAA4Bd,EAAsCvE,GAC9D3G,IAAMiM,EAAsB,IAAI1K,KAAO2K,eAMvC,QAAWrM,KAJXoM,EAAIE,KAAKjB,EAAkBE,QAAU,MAAOF,EAAkBrE,KAAK,GACpC,gBAA3BqE,EAAkB7J,OAClB4K,EAAIG,aAAe,eAEPlB,EAAkBpD,QAC9BmE,EAAII,iBAAiBxM,EAAGqL,EAAkBpD,QAAQjI,IA0BtD,MAxB+B,SAA3BqL,EAAkB7J,MAClB4K,EAAII,iBAAiB,SAAU,oBAEnCJ,EAAIK,gBAAoD,YAAlCpB,EAAkBI,YACxCW,EAAI9G,mBACAwB,EAAS,IAAI9C,MAAMoI,EAAIH,cAE3BG,EAAI1H,kBACA,IAAM0H,EAAIhC,QAAU,KAAOgC,EAAIhC,OAAS,KAAuB,IAAfgC,EAAIhC,SAAkC,OAAjBgC,EAAIP,SAAmB,CACxFtL,IAAI0F,EAAcmG,EAAIP,SACtB,GAA+B,SAA3BR,EAAkB7J,KAElB,IACIyE,EAAOI,KAAKC,MAAM8F,EAAIP,UACxB,MAAO/C,GACL,OAAOhC,EAASgC,GAGxBhC,EAAS,KAAMb,EAAMmG,EAAIM,kBAAkB,iBAAkBN,EAAIM,kBAAkB,iBAEnF5F,EAAS,IAAIqD,EAAUiC,EAAIH,WAAYG,EAAIhC,OAAQiB,EAAkBrE,OAG7EoF,EAAIO,KAAKtB,EAAkBG,MACpB,CAAEvI,yBAAcmJ,EAAID,WAKlBS,EAAU,SAASvB,EAAsCvE,GAClE,OAAOmE,EAAYrL,EAAOyL,EAAmB,CAAE7J,KAAM,SAAWsF,IAOvDqB,EAAW,SAASkD,EAAsCvE,GACnE,OAAOmE,EAAYrL,EAAOyL,EAAmB,CAAEE,OAAQ,SAAWzE,IAalEiE,EAAa,GACbC,EAAmB,EAIhB7K,IAAM0M,EAAW,SAASxB,EAAsCvE,GAEnE,GAAIkE,GAAoBhJ,EAAOO,4BAA6B,CACxDpC,IAAM2M,EAAS,mBAACzB,WAAmBvE,EAAUiG,WAAW,GAExD,OADAhC,EAAWvD,KAAKsF,GACT,CAAE7J,kBAAW6J,EAAOC,WAAY,IAE3C/B,IAEAzK,IAAIyM,GAAW,EACTC,aACF,IAAID,EAIJ,IAHAA,GAAW,EACXhC,IAEOD,EAAWzK,QAAU0K,EAAmBhJ,EAAOO,6BAA6B,CAC/E,MAAiDwI,EAAWnC,wDAExDiE,EAASxB,EAAmBvE,KAOlCiB,EAhDoB,SAASsD,EAAsCvE,GACzE,OAAOmE,EAAYrL,EAAOyL,EAAmB,CAAE7J,KAAM,gBAAkBsF,GA+CvDoG,CAAe7B,WAAoBvC,EAAa7C,EAAoBkH,EAAuBC,GAIvG,GAFAH,IAEInE,EACAhC,EAASgC,QACN,GAAI7C,EAAM,CACb9F,IAAMuD,EAAwB,IAAIhC,KAAOwI,MACnCmD,EAAM3L,KAAO2L,KAAO3L,KAAO4L,UACjC5J,EAAIgB,kBACAoC,EAAS,KAAMpD,GACf2J,EAAIE,gBAAgB7J,EAAI3D,MAE5B2D,EAAI4B,0BAAgBwB,EAAS,IAAI9C,MAAM,iIACvC7D,IAAMqN,EAAa,IAAI9L,KAAO+L,KAAK,CAAC,IAAIC,WAAWzH,IAAQ,CAAEzE,KAAM,cAClEkC,EAAUyJ,aAAeA,EACzBzJ,EAAU0J,QAAUA,EACrB1J,EAAI3D,IAAMkG,EAAK0H,WAAaN,EAAIO,gBAAgBJ,GAnDlC,wHAuDtB,MAAO,CACHvK,kBACI8E,EAAQ9E,SACRgK,OCvOZ,SAASY,EAAkBrM,EAAcsM,EAAoBC,GAClCA,EAAavM,KAAmD,IAA1CuM,EAAavM,GAAMY,QAAQ0L,KAEpEC,EAAavM,GAAQuM,EAAavM,IAAS,GAC3CuM,EAAavM,GAAMgG,KAAKsG,IAIhC,SAASE,EAAqBxM,EAAcsM,EAAoBC,GAC5D,GAAIA,GAAgBA,EAAavM,GAAO,CACpCrB,IAAM8N,EAAQF,EAAavM,GAAMY,QAAQ0L,IAC1B,IAAXG,GACAF,EAAavM,GAAM0M,OAAOD,EAAO,IAK7C,IAAaE,EAGTzI,SAAYlE,EAAcyE,kBAAe,IACrCrG,EAAOuC,KAAM8D,GACb9D,KAAKX,KAAOA,GAIP4M,cAGT1I,WAAY0C,EAAcnC,kBAAe,IACrCsC,YAAM,QAAS3I,EAAO,OAACwI,GAAQnC,qGAJPkI,GAanBE,2BAeTC,YAAG9M,EAASsM,eACHS,WAAapM,KAAKoM,YAAc,KACnB/M,EAAMsM,EAAU3L,KAAKoM,YAEhCpM,MAnBMkM,YA6BjBG,aAAIhN,EAASsM,YACYtM,EAAMsM,EAAU3L,KAAKoM,cACrB/M,EAAMsM,EAAU3L,KAAKsM,mBAEnCtM,MAjCMkM,YA6CjBK,cAAKlN,EAAcsM,eACVW,kBAAoBtM,KAAKsM,mBAAqB,KACjCjN,EAAMsM,EAAU3L,KAAKsM,mBAEhCtM,MAjDMkM,YAoDjBM,cAAKhH,EAAczH,GAIM,iBAAVyH,MACC,IAAIwG,EAAMxG,EAAOzH,GAAc,KAG3CC,IAAMqB,EAAOmG,EAAMnG,KAEnB,GAAIW,KAAKyM,QAAQpN,GAAO,CACnBmG,EAAYkH,OAAS1M,mBAGJA,KAAKoM,YAAcpM,KAAKoM,WAAW/M,GAAQW,KAAKoM,WAAW/M,GAAMsN,QAAU,mBAC3D,MACrBC,KAAK5M,KAAMwF,iBAGCxF,KAAKsM,mBAAqBtM,KAAKsM,kBAAkBjN,GAAQW,KAAKsM,kBAAkBjN,GAAMsN,QAAU,mBAChF,KAA9BhB,OACPE,EAAqBxM,EAAMsM,EAAU3L,KAAKsM,qBACjCM,KAAK5M,KAAMwF,GAGxBxH,IAAM6O,EAAS7M,KAAK8M,eAChBD,MAEIrH,EACmC,mBAA5BxF,KAAK+M,mBAAoC/M,KAAK+M,qBAAuB/M,KAAK+M,oBAErFF,EAAOL,KAAKhH,SAKTA,aAAiByG,WAChBhG,MAAMT,EAAMS,cAGjBjG,MA5FMkM,YAsGjBO,iBAAQpN,UAECW,KAAKoM,YAAcpM,KAAKoM,WAAW/M,IAASW,KAAKoM,WAAW/M,GAAMlB,OAAS,GAC3E6B,KAAKsM,mBAAqBtM,KAAKsM,kBAAkBjN,IAASW,KAAKsM,kBAAkBjN,GAAMlB,OAAS,GAChG6B,KAAK8M,gBAAkB9M,KAAK8M,eAAeL,QAAQpN,IA1G3C6M,YAqHjBc,0BAAiBH,EAAkB/I,UAC/B9D,KAAK8M,eAAiBD,EACtB7M,KAAK+M,mBAAqBjJ,EAEnB9D,6BCvKf,IAAIiN,EAAqB,eAGrBC,EAAQ,GAERC,EAAM3O,KAAK4O,GAAK,IAChBC,EAAM,IAAM7O,KAAK4O,GAEjBE,EAAI,QACJC,EAAY,mBAEhB,SAASC,EAAQC,GACb,OAAOC,OAAOD,KAAOA,GAAKA,EAAI,GAAM,EAKxC,SAASR,EAAkBU,GAGvB,GAFAA,EAAUA,GAAW,GACrB3N,KAAK4N,KAAOD,EAAQC,MAAQ,KACvBV,EAAMlN,KAAK4N,MAAO,CACnB,IAAIA,EAAO5N,KAAK4N,KACZC,EAAIX,EAAMlN,KAAK4N,MAAQ,GAC3BC,EAAEC,GAAK,GACPD,EAAEE,GAAK,GACPF,EAAEG,GAAK,GACPH,EAAEI,GAAK,GACP,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IACpBL,EAAEC,GAAGzI,KAAKuI,EAAO,KACjBC,EAAEE,GAAG1I,KAAKuI,KAAYpP,KAAK4O,KAC3BS,EAAEG,GAAG3I,KAAKuI,EAAO,GACjBC,EAAEI,GAAG5I,KAAKuI,GACVA,GAAQ,EAGhB5N,KAAK8N,GAAKZ,EAAMlN,KAAK4N,MAAME,GAC3B9N,KAAK+N,GAAKb,EAAMlN,KAAK4N,MAAMG,GAC3B/N,KAAKgO,GAAKd,EAAMlN,KAAK4N,MAAMI,GAC3BhO,KAAKiO,GAAKf,EAAMlN,KAAK4N,MAAMK,GA6J/B,OAtJAhB,EAAkBkB,UAAUC,GAAK,SAASC,EAAIC,GAC5C,GAAId,EAAQc,GAAO,CACjB,IAAIV,EAAO5N,KAAK4N,KAAOpP,KAAK+P,IAAI,EAAGD,GAC/BJ,EAAIN,EAAO,EACXY,EAAMZ,EAAO,IACba,EAAMb,KAAYpP,KAAK4O,IACvBsB,EAAKd,EACLe,EAAInQ,KAAKoQ,IAAIpQ,KAAKqQ,IAAIrQ,KAAKsQ,IAAI3B,EAAMkB,EAAG,KAAM,OAAS,OAO3D,OANIU,EAAIb,EAAIG,EAAG,GAAKG,GAEfE,IAAQK,EAAIL,IADbM,EAAId,EAAI,GAAM1P,KAAKyQ,OAASN,MAAUA,KAAOF,GAE5CC,IAAQM,EAAIN,GAGV,CAACK,EAAGC,GAEPd,EAAIlO,KAAKgO,GAAGM,GACZK,EAAInQ,KAAKoQ,IAAIpQ,KAAKqQ,IAAIrQ,KAAKsQ,IAAI3B,EAAMkB,EAAG,KAAM,OAAS,OAD3D,IAEIU,EAAIvQ,KAAK0Q,MAAMhB,EAAIG,EAAG,GAAKrO,KAAK8N,GAAGQ,IACnCU,EAAIxQ,KAAK0Q,MAAMhB,EAAI,GAAM1P,KAAKyQ,OAASN,MAAUA,KAAQ3O,KAAK+N,GAAGO,IAKrE,OAJCS,EAAI/O,KAAKiO,GAAGK,KAAWS,EAAI/O,KAAKiO,GAAGK,IACnCU,EAAIhP,KAAKiO,GAAGK,KAAWU,EAAIhP,KAAKiO,GAAGK,IAG7B,CAACS,EAAGC,IAQf/B,EAAkBkB,UAAUE,GAAK,SAASD,EAAIE,GAC5C,GAAId,EAAQc,GAAO,CACjB,IAAIV,EAAO5N,KAAK4N,KAAOpP,KAAK+P,IAAI,EAAGD,GAC/BE,EAAMZ,EAAO,IACba,EAAMb,KAAYpP,KAAK4O,IACvBY,EAAKJ,EAAO,EACZuB,GAAKf,EAAG,GAAKJ,IAAOS,EAGxB,MAAO,EAFIL,EAAG,GAAKJ,GAAMQ,EACfnB,KAAW7O,KAAK4Q,KAAK5Q,KAAK6Q,IAAIF,IAAM,GAAM3Q,KAAK4O,KAGrD+B,GAAKf,EAAG,GAAKpO,KAAKgO,GAAGM,KAAWtO,KAAK+N,GAAGO,GAG5C,MAAO,EAFIF,EAAG,GAAKpO,KAAKgO,GAAGM,IAAStO,KAAK8N,GAAGQ,GAClCjB,KAAW7O,KAAK4Q,KAAK5Q,KAAK6Q,IAAIF,IAAM,GAAM3Q,KAAK4O,MAa7DH,EAAkBkB,UAAUmB,KAAO,SAASP,EAAGC,EAAGV,EAAMiB,EAAWC,GAE3DD,IACAP,EAAKxQ,KAAK+P,IAAI,EAAGD,GAAQ,EAAKU,GAGlC,IAAIX,EAAK,CAACU,EAAI/O,KAAK4N,OAAQoB,EAAI,GAAKhP,KAAK4N,MAErC6B,EAAK,GAAGV,EAAI,GAAK/O,KAAK4N,KAAMoB,EAAIhP,KAAK4N,MACrC0B,EAAOtP,KAAKqO,GAAGA,EAAIC,GAAMoB,OAAO1P,KAAKqO,GAAGoB,EAAInB,IAGhD,MAAY,WAARkB,EACOxP,KAAK2P,QAAQL,EAAM,UAEnBA,GAWfrC,EAAkBkB,UAAUyB,IAAM,SAASN,EAAMhB,EAAMiB,EAAWC,GAElD,WAARA,IACAF,EAAOtP,KAAK2P,QAAQL,EAAM,UAG9B,IAAIjB,EAAK,CAACiB,EAAK,GAAIA,EAAK,IACpBG,EAAK,CAACH,EAAK,GAAIA,EAAK,IACpBO,EAAQ7P,KAAKoO,GAAGC,EAAIC,GACpBwB,EAAQ9P,KAAKoO,GAAGqB,EAAInB,GAEpBS,EAAI,CAAEvQ,KAAKuR,MAAMF,EAAM,GAAK7P,KAAK4N,MAAOpP,KAAKuR,OAAOD,EAAM,GAAK,GAAK9P,KAAK4N,OACzEoB,EAAI,CAAExQ,KAAKuR,MAAMD,EAAM,GAAK9P,KAAK4N,MAAOpP,KAAKuR,OAAOF,EAAM,GAAK,GAAK7P,KAAK4N,OACzEoC,EAAS,CACTC,KAAMzR,KAAKoQ,IAAIsB,MAAM1R,KAAMuQ,GAAK,EAAI,EAAIvQ,KAAKoQ,IAAIsB,MAAM1R,KAAMuQ,GAC7DoB,KAAM3R,KAAKoQ,IAAIsB,MAAM1R,KAAMwQ,GAAK,EAAI,EAAIxQ,KAAKoQ,IAAIsB,MAAM1R,KAAMwQ,GAC7DoB,KAAM5R,KAAKqQ,IAAIqB,MAAM1R,KAAMuQ,GAC3BsB,KAAM7R,KAAKqQ,IAAIqB,MAAM1R,KAAMwQ,IAE/B,GAAIO,EAAW,CACX,IAAIe,EAAM,CACNH,KAAO3R,KAAK+P,IAAI,EAAGD,GAAQ,EAAK0B,EAAOK,KACvCA,KAAO7R,KAAK+P,IAAI,EAAGD,GAAQ,EAAK0B,EAAOG,MAE3CH,EAAOG,KAAOG,EAAIH,KAClBH,EAAOK,KAAOC,EAAID,KAEtB,OAAOL,GASX/C,EAAkBkB,UAAUwB,QAAU,SAASL,EAAMiB,GACjD,MAAW,WAAPA,EACOvQ,KAAKwQ,QAAQlB,EAAK3C,MAAM,EAAG,IAAI+C,OAAO1P,KAAKwQ,QAAQlB,EAAK3C,MAAM,EAAE,KAEhE3M,KAAKyQ,QAAQnB,EAAK3C,MAAM,EAAG,IAAI+C,OAAO1P,KAAKyQ,QAAQnB,EAAK3C,MAAM,EAAE,MAK/EM,EAAkBkB,UAAUqC,QAAU,SAASnC,GAC3C,IAAIqC,EAAK,CACLpD,EAAIe,EAAG,GAAKlB,EACZG,EAAI9O,KAAKyQ,IAAIzQ,KAAKmS,IAAa,IAARnS,KAAK4O,GAAY,GAAMiB,EAAG,GAAKlB,KAO1D,OAJCuD,EAAG,GAAKnD,IAAemD,EAAG,GAAKnD,GAC/BmD,EAAG,IAAMnD,IAAemD,EAAG,IAAMnD,GACjCmD,EAAG,GAAKnD,IAAemD,EAAG,GAAKnD,GAC/BmD,EAAG,IAAMnD,IAAemD,EAAG,IAAMnD,GAC3BmD,GAIXzD,EAAkBkB,UAAUsC,QAAU,SAASC,GAC3C,MAAO,CACFA,EAAG,GAAKrD,EAAMC,GACL,GAAR9O,KAAK4O,GAAU,EAAM5O,KAAK4Q,KAAK5Q,KAAK6Q,KAAKqB,EAAG,GAAKpD,KAAOD,IAI3DJ,EAnMkB,GAwMrB2D,UAA2B3D,wCClMzB4D,EAAqB,CACvBC,EAAK,cACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,iBACLC,EAAK,gBACLC,EAAK,iBACLC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,iBACNC,GAAM,gBACNC,GAAM,gBACNC,GAAM,kBACNC,GAAM,mBAGJC,EAAoB,SAAU/T,EAAGD,EAAGiU,GAEtC,OADa/T,KAAKgU,IAAKjU,EAAID,EAAK,GAClBiU,GCZlB,IAAME,EAIFlP,SAAYmP,EAAaC,MACjBC,MAAMF,IAAQE,MAAMD,SACd,IAAI9Q,iCAAiC6Q,OAAQC,OAIvD,GAFA3S,KAAK0S,KAAOA,EACZ1S,KAAK2S,KAAOA,EACR3S,KAAK2S,IAAM,IAAM3S,KAAK2S,KAAO,GAC7B,MAAM,IAAI9Q,MAAM,8DAXf4Q,YAwBTI,uBACW,IAAIJ,GT4BEhF,ES5BUzN,KAAK0S,KT8B1BI,IAAMrF,GAFgBmB,GS5BU,OT6BhCV,GADmCW,ES5BE,KT6B3BD,GACWV,GAAKA,EAAIU,KACtBA,EAAOC,EAAMiE,GS/BsB9S,KAAK2S,KT4BnD,IAAclF,EAAWmB,EAAaC,EACnCX,EACA4E,GSvDGL,YAoCTM,mBACI,MAAO,MAAML,SAAUC,MArClBF,YAgDT/T,oCACqBsB,cAAaA,cAjDzByS,YA6DTO,kBAASC,GACLjV,IACMkV,EAAc,IAAMD,EADkB,SAExCE,EAAcD,EAAc1U,KAAK4U,IAAK5U,KAAK4O,GAAK,IAAOpN,KAAK2S,KAEhE,OAAO,IAAIU,EAAa,IAAIZ,EAAOzS,KAAK0S,IAAMS,EAAanT,KAAK2S,IAAMO,GAClE,IAAIT,EAAOzS,KAAK0S,IAAMS,EAAanT,KAAK2S,IAAMO,KAnE7CT,EAmFF9C,iBAAQ2D,GACX,GAAIA,aAAiBb,SACVa,KAEPC,MAAMC,QAAQF,KAA4B,IAAjBA,EAAMnV,QAAiC,IAAjBmV,EAAMnV,eAC9C,IAAIsU,EAAO/E,OAAO4F,EAAM,IAAK5F,OAAO4F,EAAM,KAErD,IAAKC,MAAMC,QAAQF,IAA2B,iBAAVA,GAAgC,OAAVA,SAC/C,IAAIb,EAEP/E,OAAO,QAAS4F,EAASA,EAAYZ,IAAOY,EAAYG,KACxD/F,OAAO4F,EAAMX,MAGrB,MAAM,IAAI9Q,MAAM,wKCjGxB,IAAMwR,EAKF9P,SAAYmQ,EAASC,GACZD,IAEMC,OACFC,aAAaF,GAAIG,aAAaF,GACd,IAAdD,EAAGvV,YACLyV,aAAa,GAAI,KAAO,KAAKC,aAAa,GAAI,KAAO,KAE1D7T,KAAK4T,aAAaF,EAAG,IAAIG,aAAaH,EAAG,MCvB9C,SAASI,EAAiBpB,GAC7B,WAAcA,GAAO,IAGlB,SAASqB,EAAiBpB,GAC7B,WAAe,IAAMnU,KAAK4O,GAAK5O,KAAKyQ,IAAIzQ,KAAKmS,IAAInS,KAAK4O,GAAK,EAAIuF,EAAMnU,KAAK4O,GAAK,OAAU,IDK1EiG,YAuBfQ,sBAAaF,eACJK,IAAML,aAAclB,EAAS,IAAIA,EAAOkB,EAAGjB,IAAKiB,EAAGhB,KAAOF,EAAO9C,QAAQgE,GACvE3T,MAzBIqT,YAkCfO,sBAAaF,eACJO,IAAMP,aAAcjB,EAAS,IAAIA,EAAOiB,EAAGhB,IAAKgB,EAAGf,KAAOF,EAAO9C,QAAQ+D,GACvE1T,MApCIqT,YA6Cf5V,gBAAO6H,GACHtH,IAEIkW,EAAKC,EAFHT,EAAK1T,KAAKiU,IACZN,EAAK3T,KAAKgU,IAGd,GAAI1O,aAAemN,IACTnN,IACAA,MAEH,CAAA,KAAIA,aAAe+N,GAOtB,OAAIE,MAAMC,QAAQlO,GACVA,EAAI8O,MAAMb,MAAMC,SACTxT,KAAKvC,OAAO4V,EAAa1D,QAAQrK,IAEjCtF,KAAKvC,OAAOgV,EAAO9C,QAAQrK,IAGnCtF,KAVP,GAHAkU,EAAM5O,EAAI2O,IACVE,EAAM7O,EAAI0O,KAELE,IAAQC,EAAK,OAAOnU,YAaxB0T,GAAOC,GAKRD,EAAGhB,IAAMlU,KAAKoQ,IAAIsF,EAAIxB,IAAKgB,EAAGhB,KAC9BgB,EAAGf,IAAMnU,KAAKoQ,IAAIsF,EAAIvB,IAAKe,EAAGf,KAC9BgB,EAAGjB,IAAMlU,KAAKqQ,IAAIsF,EAAIzB,IAAKiB,EAAGjB,KAC9BiB,EAAGhB,IAAMnU,KAAKqQ,IAAIsF,EAAIxB,IAAKgB,EAAGhB,OAP9B3S,KAAKiU,IAAM,IAAIxB,EAAOyB,EAAIxB,IAAKwB,EAAIvB,KACnC3S,KAAKgU,IAAM,IAAIvB,EAAO0B,EAAIzB,IAAKyB,EAAIxB,MAShC3S,MAlFIqT,YA6FfgB,qBACI,OAAO,IAAI5B,QAAawB,IAAIvB,IAAM1S,KAAKgU,IAAItB,KAAO,QAASuB,IAAItB,IAAM3S,KAAKgU,IAAIrB,KAAO,IA9F1EU,YAsGfiB,wBAAyB,OAAOtU,KAAKiU,KAtGtBZ,YA6GfkB,wBAAyB,OAAOvU,KAAKgU,KA7GtBX,YAoHfmB,wBAAyB,OAAO,IAAI/B,EAAOzS,KAAKyU,UAAWzU,KAAK0U,aApHjDrB,YA2HfsB,wBAAyB,OAAO,IAAIlC,EAAOzS,KAAK4U,UAAW5U,KAAK6U,aA3HjDxB,YAkIfoB,mBAAoB,OAAOzU,KAAKiU,IAAIvB,KAlIrBW,YAyIfwB,oBAAqB,OAAO7U,KAAKiU,IAAItB,KAzItBU,YAgJfuB,mBAAoB,OAAO5U,KAAKgU,IAAItB,KAhJrBW,YAuJfqB,oBAAqB,OAAO1U,KAAKgU,IAAIrB,KAvJtBU,YAkKfN,mBACI,MAAO,CAAC/S,KAAKiU,IAAIlB,UAAW/S,KAAKgU,IAAIjB,YAnK1BM,YA+Kf3U,oBACI,sBAAuBsB,KAAKiU,IAAIvV,gBAAesB,KAAKgU,IAAItV,gBAhL7C2U,YAwLfyB,gCACkBb,KAAOjU,KAAKgU,MAzLfX,EA0MR1D,iBAAQ2D,GACX,OAAKA,GAASA,aAAiBD,EAAqBC,EAC7C,IAAID,EAAaC,IE5NhC,IAAMyB,EAKFxR,SAAYyM,EAA0CgF,EAAkBC,GACpEjV,KAAKgQ,OAASqD,EAAa1D,QAAQ3P,KAAKkV,eAAelF,IACvDhQ,KAAKgV,QAAUA,GAAW,EAC1BhV,KAAKiV,QAAUA,GAAW,IARjBF,YAWbG,wBAAelF,GAEX,OAAKuD,MAAMC,QAAQxD,IAA6B,IAAlBA,EAAO7R,OAC9B,MAAM0Q,KAAK,IAAKmB,EAAO,SAAUnB,KAAK,GAAImB,EAAO,SAAUpB,IAAI,IAAKoB,EAAO,SAAUpB,IAAI,GAAIoB,EAAO,KADjD,EAAE,KAAM,GAAI,IAAK,KAblE+E,YAiBbI,kBAASC,GACLpX,IAAMqX,EAAY7W,KAAK+P,IAAI,EAAG6G,EAAOE,GAC/BC,EACI/W,KAAKuR,MAAM+D,EAAiB9T,KAAKgQ,OAAOyE,WAAaY,GADzDE,EAEI/W,KAAKuR,MAAMgE,EAAiB/T,KAAKgQ,OAAO0E,YAAcW,GAF1DE,EAGI/W,KAAKgX,KAAK1B,EAAiB9T,KAAKgQ,OAAO4E,WAAaS,GAHxDE,EAII/W,KAAKgX,KAAKzB,EAAiB/T,KAAKgQ,OAAO6E,YAAcQ,UAEnDD,EAAOrG,GAAKwG,GAAcH,EAAOrG,EAAIwG,GAAcH,EAAOpG,GAAKuG,GAAcH,EAAOpG,EAAIuG,GC9B5GvX,IAAMyX,EAAc,oBAgBdC,EAAgB,SAAUC,EAAWC,GACvC,OAAIA,EAEOA,EADOpX,KAAKgU,IAAImD,EAAU5G,EAAI4G,EAAU3G,GAAK4G,EAAWzX,QAG5D,gGCYL0X,EASFtS,SAAY5B,EAAkBmU,EAAqBC,EAAuBpI,GACtE3N,KAAK2B,QAAUA,EACf3B,KAAK+V,OAASA,OACTtT,QAAUd,EAAQa,GAAGE,qBACrBsT,OAAOF,EAAOnI,WAbbkI,YAgBVG,gBAAOF,EAAqBnI,4BAElBsI,GAAUjW,KAAK4N,MAAQ5N,KAAK4N,KAAK,KAAO9L,GAAS9B,KAAK4N,KAAK,KAAO7L,IACtD/B,oBAGlBA,KAAKkW,UAAYC,QAAQxI,GAAWA,EAAQuI,WAC5C1T,EAAGG,YAAYH,EAAGI,WAAY5C,KAAKyC,WAE3B2T,sBAAsB5M,KAAI,KAC1B6M,iBAAiB7M,IAAI,KACrB8M,iCAAiC9M,IAAIxJ,KAAK+V,SAAWvT,EAAGM,QAAU6K,IAAmC,IAAxBA,EAAQ4I,cAEzFN,QACKrI,KAAO,CAAC9L,EAAOC,GAEhB+T,aAAiBU,GAAoBV,aAAiBW,GAAqBX,aAAiBY,GAAoBZ,aAAiBa,IAC9H9T,WAAWL,EAAGI,WAAY,EAAG5C,KAAK+V,OAAQ/V,KAAK+V,OAAQvT,EAAGO,cAAe+S,GAE5EtT,EAAGK,WAAWL,EAAGI,WAAY,EAAG5C,KAAK+V,OAAQjU,EAAOC,EAAQ,EAAG/B,KAAK+V,OAAQvT,EAAGO,cAAe+S,EAAMhS,OAIpGgS,aAAiBU,GAAoBV,aAAiBW,GAAqBX,aAAiBY,GAAoBZ,aAAiBa,IAC9HC,cAAcpU,EAAGI,WAAY,EAAG,EAAG,EAAGJ,EAAGM,KAAMN,EAAGO,cAAe+S,GAEpEtT,EAAGoU,cAAcpU,EAAGI,WAAY,EAAG,EAAG,EAAGd,EAAOC,EAAQS,EAAGM,KAAMN,EAAGO,cAAe+S,EAAMhS,MAI7F9D,KAAKkW,WAAalW,KAAK6W,sBACpBC,eAAetU,EAAGI,aA/CnBiT,YAmDVtV,cAAKwW,EAAuBlE,EAAmBmE,SACzBhX,gBAElBwC,EAAGG,YAAYH,EAAGI,WAAY5C,KAAKyC,SAE/BuU,IAAcxU,EAAGyU,uBAA0BjX,KAAK6W,qBAChDG,EAAYxU,EAAG0U,QAGfH,IAAW/W,KAAK+W,SAChBvU,EAAG2U,cAAc3U,EAAGI,WAAYJ,EAAG4U,mBAAoBL,GACvDvU,EAAG2U,cAAc3U,EAAGI,WAAYJ,EAAG6U,mBAAoBL,GAAaD,GACpE/W,KAAK+W,OAASA,GAGdlE,IAAS7S,KAAK6S,OACdrQ,EAAG2U,cAAc3U,EAAGI,WAAYJ,EAAG8U,eAAgBzE,GACnDrQ,EAAG2U,cAAc3U,EAAGI,WAAYJ,EAAG+U,eAAgB1E,GACnD7S,KAAK6S,KAAOA,IArEVgD,YAyEVgB,4BACI,OAAO7W,KAAK4N,KAAK,KAAO5N,KAAK4N,KAAK,IAAOpP,KAAKyQ,IAAIjP,KAAK4N,KAAK,IAAMpP,KAAKgZ,IAAO,GAAM,GA1E9E3B,YA6EV4B,mBACiBzX,KAAK2B,WACfsB,cAAcjD,KAAKyC,SACtBzC,KAAKyC,QAAW,kBC9EpBc,WAAYmD,EAAYiH,EAAmE+J,EAAwBC,GAC/GvR,aACApG,KAAK0G,GAAKA,EACV1G,KAAK0X,WAAaA,EAClB1X,KAAKgN,iBAAiB2K,GAEtB3X,KAAKX,KAAO,eACZW,KAAKgV,QAAU,EACfhV,KAAKiV,QAAU,GACfjV,KAAK4X,WAAY,EACjB5X,KAAK6X,SAAW,IAChB7X,KAAK8X,SAAU,EAEf9X,KAAK+X,SAAWta,EAAO,GAAIkQ,GAC3BlQ,EAAOuC,KAAMlC,EAAK6P,EAAS,CAAC,MAAO,SAAU,wHAGjDqK,iCACIhY,KAAKwM,KAAK,IAAIR,EAAM,cAAe,CAACiM,SAAU,cAC1BjY,KAAK+X,oBAAWpR,EAAKuR,GACjCvR,EACA3G,EAAKwM,KAAK,IAAIP,EAAWtF,IAClBuR,IACPza,EAAOuC,EAAMkY,GAETA,EAASlI,SACThQ,EAAKmY,WAAa,IAAIpD,EAAWmD,EAASlI,OAAQhQ,EAAKgV,QAAShV,EAAKiV,UAM7EjV,EAAKwM,KAAK,IAAIR,EAAM,OAAQ,CAACiM,SAAU,SAAUG,eAAgB,cACjEpY,EAAKwM,KAAK,IAAIR,EAAM,OAAQ,CAACiM,SAAU,SAAUG,eAAgB,2tBAKzEC,eAAMC,GAEFta,IAAMua,EAAUvY,KAAK6E,IAAIM,MAAM,KAAK,GACpCnF,KAAKwY,QAAUD,sBAEM,IAAIE,OAAO,+BACf3Z,KAAKkB,KAAK6E,OACvB7E,KAAKwY,QAAUxY,KAAKwY,QAAQ7Z,QAAQ,WAAY,eAChDqB,KAAK4V,WAAa,CAAC,IAAK,IAAK,IAAK,MAGlC5V,KAAK0Y,QACL1Y,KAAKwY,SAAY,UAAUxY,KAAV,OAGrBA,KAAKsY,IAAMA,EACXtY,KAAKgY,oBAGTW,qBACI,OAAOlb,EAAO,GAAIuC,KAAK+X,uBAG3Ba,iBAAQxD,GACJ,OAAQpV,KAAKmY,YAAcnY,KAAKmY,WAAWhD,SAASC,EAAOyD,wBAG/DC,kBAASC,EAAYpU,OFnGG9F,EAAKiF,SEqGnB6R,EAAY,CAAEL,EAAGyD,EAAK3D,OAAO4D,YAAajK,EAAGgK,EAAK3D,OAAOyD,UAAU9J,EAAGC,EAAG+J,EAAK3D,OAAOyD,UAAU7J,GAE/FnK,GFvGchG,EEuGGmB,KAAKwY,QFvGH1U,EEuGYrG,EAAO,CACxCwb,EAAGvD,EAAcC,EAAW3V,KAAK4V,YACjCN,EAAItV,KAAKkZ,SAAWlZ,KAAKkZ,QAAQvD,EAAUL,GAAMtV,KAAKkZ,QAAQvD,EAAUL,GAAKK,EAAUL,EACvFvG,EAAG4G,EAAU5G,EACbC,EAAG2G,EAAU3G,GACdhP,KAAK2N,SF3GL9O,EAAIF,QAAQ8W,WAAc5W,EAAKsa,GAClC/a,IAAIgb,EAAQtV,EAAKqV,GAEjB,QAAcE,IAAVD,EACA,MAAM,IAAIvX,wCAAwChD,GAKtD,MAH4B,mBAAVua,IACdA,EAAQA,EAAMtV,IAEXsV,KEmGPL,EAAKnT,QAAU8E,EAAS,KAAC7F,YAAQ8B,EAAKpF,GAGlC,UAFOwX,EAAKnT,QAERmT,EAAKO,QACLP,EAAKQ,MAAQ,WACb5U,EAAS,WACN,GAAIgC,EACPoS,EAAKQ,MAAQ,UACb5U,EAASgC,QACN,GAAIpF,EAAK,CACRvB,EAAKsY,IAAIkB,sBAAsBT,EAAKU,cAAclY,UAC9CA,EAAUyJ,oBACVzJ,EAAU0J,QAElBjN,IAAM2D,EAAU3B,EAAKsY,IAAIoB,QAAQ/X,QAC3Ba,EAAKb,EAAQa,GACnBuW,EAAKtW,QAAUzC,EAAKsY,IAAIoB,QAAQC,eAAepY,EAAIO,OAC/CiX,EAAKtW,QACLsW,EAAKtW,QAAQuT,OAAOzU,EAAK,CAAE2U,WAAW,KAEtC6C,EAAKtW,QAAU,IAAIoT,EAAQlU,EAASJ,EAAKiB,EAAGM,KAAM,CAAEoT,WAAW,IAC/D6C,EAAKtW,QAAQlC,KAAKiC,EAAG0U,OAAQ1U,EAAGoX,cAAepX,EAAGyU,uBAE9CtV,EAAQkY,6BACRrX,EAAGsX,cAActX,EAAGI,WAAYjB,EAAQkY,4BAA4BE,2BAA4BpY,EAAQqY,iCAIhHjB,EAAKQ,MAAQ,SAEb5U,EAAS,sBAKrBsV,mBAAUlB,EAAYpU,GACdoU,EAAKnT,UACLmT,EAAKnT,QAAQ9E,gBACNiY,EAAKnT,SAEhBjB,iBAGJuV,oBAAWnB,EAAYpU,GACfoU,EAAKtW,SAASzC,KAAKsY,IAAIoB,QAAQS,gBAAgBpB,EAAKtW,SACxDkC,iBAGJyV,yBACI,OAAO,MAhJ2BlO"}